(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5135:function(e,a,t){Promise.resolve().then(t.bind(t,4897))},4897:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return ag}});var s=t(7573),r=t(7653),i=t(1695),l=t(8531),n=t(1319),o=t(6228);let d=null,c=null;d=(0,l.C6)().length?(0,l.Mq)():(0,l.ZF)({apiKey:"AIzaSyBkJJ1_cQT8jot5dCYPHAdwInWbhwHjtEE",authDomain:"safecard-8702c.firebaseapp.com",projectId:"safecard-8702c",storageBucket:"safecard-8702c.firebasestorage.app",messagingSenderId:"16892588735",appId:"1:16892588735:web:4a643e36f46b73ed4e0c0a"}),c=(0,n.v0)(d),(0,o.ad)(d);let m="http://localhost:5002/api";async function u(){let e=c.currentUser;if(!e)throw Error("User not authenticated");return await e.getIdToken()}let p={getProfile:async e=>{let a=await u(),t=await fetch("".concat(m,"/users/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}});if(!t.ok)throw Error("Failed to fetch profile");return t.json()},saveHealthProfile:async(e,a)=>{console.log("[API] saveHealthProfile called with userId:",e);try{let t=await u();console.log("[API] Got auth token, making request to:","".concat(m,"/users/").concat(e,"/health-profile"));let s=await fetch("".concat(m,"/users/").concat(e,"/health-profile"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)});if(console.log("[API] Response status:",s.status,s.statusText),!s.ok){let e=await s.text();throw console.error("[API] Error response:",e),Error("Failed to save health profile")}let r=await s.json();return console.log("[API] Success response:",r),r}catch(e){throw console.error("[API] saveHealthProfile error:",e),e}}},g={search:async(e,a)=>{let t=new URLSearchParams;e&&t.append("search",e),a&&Object.keys(a).forEach(e=>{void 0!==a[e]&&null!==a[e]&&""!==a[e]&&t.append(e,a[e].toString())});let s=await fetch("".concat(m,"/products?").concat(t));if(!s.ok)throw Error("Failed to search products");return s.json()}},x={getUserMeals:async e=>{let a=await u(),t=await fetch("".concat(m,"/meals/user/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}});if(!t.ok)throw Error("Failed to fetch meals");return t.json()}},h={getById:async e=>{let a=await fetch("".concat(m,"/recipes/").concat(e));if(!a.ok)throw Error("Recipe not found");return a.json()},getMealPlan:async(e,a,t)=>{let s=await u(),r=new URLSearchParams;a&&r.append("startDate",a),t&&r.append("endDate",t);let i=await fetch("".concat(m,"/recipes/meal-plan/").concat(e,"?").concat(r),{headers:{Authorization:"Bearer ".concat(s)}});if(!i.ok)throw Error("Failed to fetch meal plan");return i.json()},generateShoppingList:async e=>{let a=await u(),t=await fetch("".concat(m,"/recipes/generate-shopping-list"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({recipeIds:e})});if(!t.ok)throw Error("Failed to generate shopping list");return t.json()}},b={getDashboard:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,t=await u(),s=await fetch("".concat(m,"/analytics/dashboard/").concat(e,"?days=").concat(a),{headers:{Authorization:"Bearer ".concat(t)}});if(!s.ok)throw Error("Failed to fetch dashboard analytics");return s.json()},getNutritionChart:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,t=await u(),s=await fetch("".concat(m,"/analytics/nutrition-chart/").concat(e,"?days=").concat(a),{headers:{Authorization:"Bearer ".concat(t)}});if(!s.ok)throw Error("Failed to fetch nutrition chart");return s.json()}},y={getUserLists:async e=>{let a=await u(),t=await fetch("".concat(m,"/shopping-lists/user/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}});if(!t.ok)throw Error("Failed to fetch shopping lists");return t.json()},getList:async e=>{let a=await u(),t=await fetch("".concat(m,"/shopping-lists/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}});if(!t.ok)throw Error("Failed to fetch shopping list");return t.json()},create:async(e,a,t)=>{let s=await u(),r=await fetch("".concat(m,"/shopping-lists"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({userId:e,name:a,description:t})});if(!r.ok)throw Error("Failed to create shopping list");return r.json()},addItem:async(e,a)=>{let t=await u(),s=await fetch("".concat(m,"/shopping-lists/").concat(e,"/items"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)});if(!s.ok)throw Error("Failed to add item");return s.json()},updateItem:async(e,a,t)=>{let s=await u(),r=await fetch("".concat(m,"/shopping-lists/").concat(e,"/items/").concat(a),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to update item");return r.json()},deleteItem:async(e,a)=>{let t=await u(),s=await fetch("".concat(m,"/shopping-lists/").concat(e,"/items/").concat(a),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(!s.ok)throw Error("Failed to delete item");return s.json()},delete:async e=>{let a=await u(),t=await fetch("".concat(m,"/shopping-lists/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}});if(!t.ok)throw Error("Failed to delete shopping list");return t.json()}},f={getFeed:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"all",r=arguments.length>4?arguments[4]:void 0,i=new URLSearchParams({page:a.toString(),limit:t.toString(),filter:s});e&&i.append("userId",e),r&&i.append("tags",r);let l=await fetch("".concat(m,"/social/feed?").concat(i));if(!l.ok)throw Error("Failed to fetch feed");return l.json()},createPost:async e=>{let a=await u(),t=await fetch("".concat(m,"/social/posts"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create post");return t.json()},getPost:async(e,a)=>{let t=await fetch("".concat(m,"/social/posts/").concat(e).concat(a?"?userId=".concat(a):""));if(!t.ok)throw Error("Failed to fetch post");return t.json()},likePost:async(e,a)=>{let t=await u(),s=await fetch("".concat(m,"/social/posts/").concat(e,"/like"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:a})});if(!s.ok)throw Error("Failed to like post");return s.json()},bookmarkPost:async(e,a)=>{let t=await u(),s=await fetch("".concat(m,"/social/posts/").concat(e,"/bookmark"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:a})});if(!s.ok)throw Error("Failed to bookmark post");return s.json()},addComment:async(e,a,t,s,r)=>{let i=await u(),l=await fetch("".concat(m,"/social/posts/").concat(e,"/comments"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify({userId:a,userName:t,content:s,userAvatar:r})});if(!l.ok)throw Error("Failed to add comment");return l.json()}},j={scan:async(e,a)=>{let t=await fetch("".concat(m,"/scanner/scan"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({barcode:e,userId:a})});if(!t.ok)throw Error("Failed to scan product");return t.json()}},v={getAll:async(e,a)=>{let t=await u(),s=new URLSearchParams;(null==a?void 0:a.location)&&s.append("location",a.location),(null==a?void 0:a.category)&&s.append("category",a.category),(null==a?void 0:a.status)&&s.append("status",a.status),(null==a?void 0:a.search)&&s.append("search",a.search);let r=await fetch("".concat(m,"/inventory/").concat(e,"?").concat(s),{headers:{Authorization:"Bearer ".concat(t)}});if(!r.ok)throw Error("Failed to fetch inventory");return r.json()},delete:async(e,a)=>{let t=await u(),s=await fetch("".concat(m,"/inventory/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:a})});if(!s.ok)throw Error("Failed to delete item");return s.json()},scanBarcode:async(e,a,t,s)=>{let r=await u(),i=await fetch("".concat(m,"/inventory/scan"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({userId:e,barcode:a,quantity:t,location:s})});if(!i.ok)throw Error("Failed to scan item");return i.json()}};var N=t(5729),w=t(3806),C=t(8533),S=JSON.parse('{"app":{"name":"SafeCart","tagline":"Shop safely, live confidently"},"navigation":{"home":"Home","scanner":"Scan","shopping":"Lists","meals":"Meals","inventory":"Inventory","discover":"Discover","analytics":"Analytics","community":"Community","settings":"Settings"},"buttons":{"save":"Save","cancel":"Cancel","delete":"Delete","edit":"Edit","add":"Add","scan":"Scan","search":"Search","back":"Back","next":"Next","close":"Close","ok":"OK","done":"Done","create":"Create","update":"Update","logout":"Logout"},"safety":{"safe":"SAFE","danger":"DANGER","unknown":"UNKNOWN","contains":"Contains","mayContain":"May contain","allergenWarning":"⚠️ DANGER: Contains {{allergen}} - you\'re allergic!","safeForYou":"✅ Safe for you","checkAllergens":"Please check allergens"},"common":{"loading":"Loading...","error":"Error","success":"Success","warning":"Warning","info":"Info","yes":"Yes","no":"No","or":"or","and":"and"},"language":{"select":"Select Language","english":"English","hebrew":"Hebrew","spanish":"Spanish"}}'),P=JSON.parse('{"app":{"name":"SafeCart","tagline":"קניות בטוחות, חיים בביטחון"},"navigation":{"home":"בית","scanner":"סריקה","shopping":"רשימות","meals":"ארוחות","inventory":"מלאי","discover":"גלה","analytics":"ניתוח","community":"קהילה","settings":"הגדרות"},"buttons":{"save":"שמור","cancel":"בטל","delete":"מחק","edit":"ערוך","add":"הוסף","scan":"סרוק","search":"חפש","back":"חזור","next":"הבא","close":"סגור","ok":"אישור","done":"סיים","create":"צור","update":"עדכן","logout":"התנתק"},"safety":{"safe":"בטוח","danger":"סכנה","unknown":"לא ידוע","contains":"מכיל","mayContain":"עשוי להכיל","allergenWarning":"⚠️ סכנה: מכיל {{allergen}} - יש לך אלרגיה!","safeForYou":"✅ בטוח עבורך","checkAllergens":"אנא בדוק אלרגנים"},"common":{"loading":"טוען...","error":"שגיאה","success":"הצלחה","warning":"אזהרה","info":"מידע","yes":"כן","no":"לא","or":"או","and":"ו"},"language":{"select":"בחר שפה","english":"אנגלית","hebrew":"עברית","spanish":"ספרדית"}}'),k=JSON.parse('{"app":{"name":"SafeCart","tagline":"Compra con seguridad, vive con confianza"},"navigation":{"home":"Inicio","scanner":"Escanear","shopping":"Listas","meals":"Comidas","inventory":"Inventario","discover":"Descubrir","analytics":"An\xe1lisis","community":"Comunidad","settings":"Ajustes"},"buttons":{"save":"Guardar","cancel":"Cancelar","delete":"Eliminar","edit":"Editar","add":"A\xf1adir","scan":"Escanear","search":"Buscar","back":"Atr\xe1s","next":"Siguiente","close":"Cerrar","ok":"OK","done":"Hecho","create":"Crear","update":"Actualizar","logout":"Cerrar sesi\xf3n"},"safety":{"safe":"SEGURO","danger":"PELIGRO","unknown":"DESCONOCIDO","contains":"Contiene","mayContain":"Puede contener","allergenWarning":"⚠️ PELIGRO: Contiene {{allergen}} - \xa1eres al\xe9rgico!","safeForYou":"✅ Seguro para ti","checkAllergens":"Por favor revisa los al\xe9rgenos"},"common":{"loading":"Cargando...","error":"Error","success":"\xc9xito","warning":"Advertencia","info":"Informaci\xf3n","yes":"S\xed","no":"No","or":"o","and":"y"},"language":{"select":"Seleccionar idioma","english":"Ingl\xe9s","hebrew":"Hebreo","spanish":"Espa\xf1ol"}}'),D=JSON.parse('{"title":"Scan Product","subtitle":"Use your camera or enter barcode manually","infoTitle":"Tip:","infoTip":"Camera access requires HTTPS on mobile devices. If camera doesn\'t work, you can always use manual barcode entry below - it works just as well!","cameraError":{"notSupported":"Camera API not supported on this device. Please use manual entry below.","httpsRequired":"Camera requires secure connection (HTTPS). Please use manual barcode entry below, or access via HTTPS.","permissionDenied":"Camera access denied. Please allow camera permissions in your browser settings and try again.","noCamera":"No camera found on this device. Please use manual barcode entry below.","inUse":"Camera is already in use by another app. Please close other apps and try again.","constraintsFailed":"Camera constraints not supported. Trying again with default settings...","securityError":"Camera access blocked by security settings. Try accessing via HTTPS or use manual entry.","unknown":"Unable to access camera. Please use manual barcode entry below.","whyHttps":"Why? Mobile browsers require a secure connection (HTTPS) for camera access. You can still use manual barcode entry below, or ask your administrator to enable HTTPS.","howToFix":"How to fix: Go to your browser settings → Site permissions → Camera → Allow access for this site, then refresh and try again."},"camera":{"start":"Start Camera","stop":"Stop Camera","pointAtBarcode":"Point camera at barcode"},"manualEntry":{"title":"Manual Entry","placeholder":"Enter barcode or scan...","scanButton":"Scan","scanning":"Scanning..."},"results":{"na":"N/A","productNotFound":"Product not found. Try another barcode.","upc":"UPC","nutrition":{"netCarbs":"Net Carbs","glycemicIndex":"Glycemic Index","sugar":"Sugar","glScore":"GL Score"},"badges":{"safe":"SAFE","check":"CHECK"},"allergens":"Allergens","actions":{"scanAnother":"Scan Another","addToList":"Add to Shopping List","adding":"Adding..."},"addedSuccess":"✅ Product added to shopping list!","addedToNewList":"✅ Product added to your new shopping list!","addedError":"Failed to add to shopping list: {{message}}"}}'),A=JSON.parse('{"title":"סריקת מוצר","subtitle":"השתמש במצלמה או הזן ברקוד ידנית","infoTitle":"טיפ:","infoTip":"גישה למצלמה דורשת HTTPS במכשירים ניידים. אם המצלמה לא עובדת, אתה תמיד יכול להשתמש בהזנת ברקוד ידנית למטה - זה עובד באותה מידה!","cameraError":{"notSupported":"API של מצלמה לא נתמך במכשיר זה. אנא השתמש בהזנה ידנית למטה.","httpsRequired":"המצלמה דורשת חיבור מאובטח (HTTPS). אנא השתמש בהזנת ברקוד ידנית למטה, או גש דרך HTTPS.","permissionDenied":"גישה למצלמה נדחתה. אנא אפשר הרשאות מצלמה בהגדרות הדפדפן ונסה שוב.","noCamera":"לא נמצאה מצלמה במכשיר זה. אנא השתמש בהזנה ידנית למטה.","inUse":"המצלמה כבר בשימוש על ידי אפליקציה אחרת. אנא סגור אפליקציות אחרות ונסה שוב.","constraintsFailed":"אילוצי מצלמה לא נתמכים. מנסה שוב עם הגדרות ברירת מחדל...","securityError":"גישה למצלמה חסומה על ידי הגדרות אבטחה. נסה לגשת דרך HTTPS או השתמש בהזנה ידנית.","unknown":"לא ניתן לגשת למצלמה. אנא השתמש בהזנת ברקוד ידנית למטה.","whyHttps":"למה? דפדפנים ניידים דורשים חיבור מאובטח (HTTPS) לגישה למצלמה. אתה עדיין יכול להשתמש בהזנת ברקוד ידנית למטה, או לבקש מהמנהל שלך להפעיל HTTPS.","howToFix":"איך לתקן: עבור להגדרות הדפדפן ← הרשאות אתר ← מצלמה ← אפשר גישה לאתר זה, ואז רענן ונסה שוב."},"camera":{"start":"הפעל מצלמה","stop":"עצור מצלמה","pointAtBarcode":"כוון את המצלמה לברקוד"},"manualEntry":{"title":"הזנה ידנית","placeholder":"הזן ברקוד או סרוק...","scanButton":"סרוק","scanning":"סורק..."},"results":{"na":"לא זמין","productNotFound":"מוצר לא נמצא. נסה ברקוד אחר.","upc":"UPC","nutrition":{"netCarbs":"פחמימות נטו","glycemicIndex":"מדד גליקמי","sugar":"סוכר","glScore":"ציון GL"},"badges":{"safe":"בטוח","check":"בדוק"},"allergens":"אלרגנים","actions":{"scanAnother":"סרוק אחר","addToList":"הוסף לרשימת קניות","adding":"מוסיף..."},"addedSuccess":"✅ המוצר נוסף לרשימת הקניות!","addedToNewList":"✅ המוצר נוסף לרשימת הקניות החדשה שלך!","addedError":"נכשל להוסיף לרשימת הקניות: {{message}}"}}'),L=JSON.parse('{"title":"Escanear Producto","subtitle":"Usa tu c\xe1mara o ingresa el c\xf3digo de barras manualmente","infoTitle":"Consejo:","infoTip":"El acceso a la c\xe1mara requiere HTTPS en dispositivos m\xf3viles. Si la c\xe1mara no funciona, siempre puedes usar la entrada manual de c\xf3digo de barras a continuaci\xf3n - \xa1funciona igual de bien!","cameraError":{"notSupported":"API de c\xe1mara no compatible con este dispositivo. Por favor usa la entrada manual abajo.","httpsRequired":"La c\xe1mara requiere conexi\xf3n segura (HTTPS). Por favor usa la entrada manual de c\xf3digo de barras abajo, o accede v\xeda HTTPS.","permissionDenied":"Acceso a la c\xe1mara denegado. Por favor permite permisos de c\xe1mara en la configuraci\xf3n de tu navegador e intenta de nuevo.","noCamera":"No se encontr\xf3 c\xe1mara en este dispositivo. Por favor usa la entrada manual abajo.","inUse":"La c\xe1mara ya est\xe1 en uso por otra aplicaci\xf3n. Por favor cierra otras aplicaciones e intenta de nuevo.","constraintsFailed":"Restricciones de c\xe1mara no compatibles. Intentando de nuevo con configuraci\xf3n predeterminada...","securityError":"Acceso a la c\xe1mara bloqueado por configuraci\xf3n de seguridad. Intenta acceder v\xeda HTTPS o usa entrada manual.","unknown":"No se puede acceder a la c\xe1mara. Por favor usa la entrada manual de c\xf3digo de barras abajo.","whyHttps":"\xbfPor qu\xe9? Los navegadores m\xf3viles requieren una conexi\xf3n segura (HTTPS) para acceder a la c\xe1mara. A\xfan puedes usar la entrada manual de c\xf3digo de barras abajo, o pedirle a tu administrador que habilite HTTPS.","howToFix":"C\xf3mo arreglar: Ve a la configuraci\xf3n de tu navegador → Permisos del sitio → C\xe1mara → Permitir acceso para este sitio, luego actualiza e intenta de nuevo."},"camera":{"start":"Iniciar C\xe1mara","stop":"Detener C\xe1mara","pointAtBarcode":"Apunta la c\xe1mara al c\xf3digo de barras"},"manualEntry":{"title":"Entrada Manual","placeholder":"Ingresa c\xf3digo de barras o escanea...","scanButton":"Escanear","scanning":"Escaneando..."},"results":{"na":"N/D","productNotFound":"Producto no encontrado. Intenta otro c\xf3digo de barras.","upc":"UPC","nutrition":{"netCarbs":"Carbohidratos Netos","glycemicIndex":"\xcdndice Glic\xe9mico","sugar":"Az\xfacar","glScore":"Puntuaci\xf3n GL"},"badges":{"safe":"SEGURO","check":"REVISAR"},"allergens":"Al\xe9rgenos","actions":{"scanAnother":"Escanear Otro","addToList":"A\xf1adir a Lista de Compras","adding":"A\xf1adiendo..."},"addedSuccess":"✅ \xa1Producto a\xf1adido a la lista de compras!","addedToNewList":"✅ \xa1Producto a\xf1adido a tu nueva lista de compras!","addedError":"Error al a\xf1adir a la lista de compras: {{message}}"}}'),E=JSON.parse('{"title":"Shopping Lists","subtitle":"Manage your shopping lists","createList":{"button":"Create New List","title":"Create Shopping List","nameLabel":"List Name","namePlaceholder":"My Shopping List","descriptionLabel":"Description (optional)","descriptionPlaceholder":"Weekly groceries...","creating":"Creating..."},"list":{"items":"items","noItems":"No items yet","itemsRemaining":"{{count}} items remaining","summaryCompleted":"{{completed}} of {{total}} items completed","addItem":"Add Item","deleteList":"Delete List","shareList":"Share List"},"addItem":{"title":"Add Item","nameLabel":"Item Name","namePlaceholder":"Almond milk, bread, etc.","quantityLabel":"Quantity","unitLabel":"Unit","units":{"unit":"unit","kg":"kg","g":"g","lb":"lb","oz":"oz","l":"L","ml":"mL"},"adding":"Adding..."},"item":{"checked":"Checked","unchecked":"Unchecked","delete":"Delete"},"empty":{"title":"No Shopping Lists Yet","description":"Create your first shopping list to get started!","action":"Create List"},"allergenWarning":{"title":"Allergen Warning","contains":"This product contains","youAreAllergicTo":"You are allergic to","proceed":"Add Anyway","cancel":"Cancel"},"messages":{"listCreated":"Shopping list created!","listDeleted":"Shopping list deleted","itemAdded":"Item added to list","itemRemoved":"Item removed","itemChecked":"Item marked as purchased","itemUnchecked":"Item marked as not purchased"},"loading":"Loading shopping lists...","errors":{"load":"Failed to load shopping lists","createList":"Failed to create list","addItem":"Failed to add item","updateItem":"Failed to update item","deleteItem":"Failed to delete item","updateQuantity":"Failed to update quantity","deleteList":"Failed to delete list"},"safety":{"safeForYou":"Safe for you","unknown":"Product not found in database","checking":"Checking..."}}'),T=JSON.parse('{"title":"רשימות קניות","subtitle":"נהל את רשימות הקניות שלך","createList":{"button":"צור רשימה חדשה","title":"צור רשימת קניות","nameLabel":"שם הרשימה","namePlaceholder":"רשימת הקניות שלי","descriptionLabel":"תיאור (אופציונלי)","descriptionPlaceholder":"מצרכים שבועיים...","creating":"יוצר..."},"list":{"items":"פריטים","noItems":"אין פריטים עדיין","itemsRemaining":"נותרו {{count}} פריטים","summaryCompleted":"{{completed}} מתוך {{total}} פריטים הושלמו","addItem":"הוסף פריט","deleteList":"מחק רשימה","shareList":"שתף רשימה"},"addItem":{"title":"הוסף פריט","nameLabel":"שם הפריט","namePlaceholder":"חלב שקדים, לחם, וכו\'","quantityLabel":"כמות","unitLabel":"יחידה","units":{"unit":"יחידה","kg":"ק\\"ג","g":"גרם","lb":"ליברה","oz":"אונקיה","l":"ליטר","ml":"מ\\"ל"},"adding":"מוסיף..."},"item":{"checked":"נרכש","unchecked":"לא נרכש","delete":"מחק"},"empty":{"title":"אין רשימות קניות עדיין","description":"צור את רשימת הקניות הראשונה שלך כדי להתחיל!","action":"צור רשימה"},"allergenWarning":{"title":"אזהרת אלרגן","contains":"מוצר זה מכיל","youAreAllergicTo":"יש לך אלרגיה ל","proceed":"הוסף בכל זאת","cancel":"בטל"},"messages":{"listCreated":"רשימת קניות נוצרה!","listDeleted":"רשימת קניות נמחקה","itemAdded":"פריט נוסף לרשימה","itemRemoved":"פריט הוסר","itemChecked":"פריט סומן כנרכש","itemUnchecked":"פריט סומן כלא נרכש"},"loading":"טוען רשימות קניות...","errors":{"load":"נכשל בטעינת רשימות הקניות","createList":"נכשל ביצירת רשימה","addItem":"נכשל בהוספת פריט","updateItem":"נכשל בעדכון פריט","deleteItem":"נכשל במחיקת פריט","updateQuantity":"נכשל בעדכון כמות","deleteList":"נכשל במחיקת רשימה"},"safety":{"safeForYou":"בטוח עבורך","unknown":"מוצר לא נמצא במסד הנתונים","checking":"בודק..."}}'),I=JSON.parse('{"title":"Listas de Compras","subtitle":"Administra tus listas de compras","createList":{"button":"Crear Nueva Lista","title":"Crear Lista de Compras","nameLabel":"Nombre de la Lista","namePlaceholder":"Mi Lista de Compras","descriptionLabel":"Descripci\xf3n (opcional)","descriptionPlaceholder":"Compras semanales...","creating":"Creando..."},"list":{"items":"art\xedculos","noItems":"A\xfan no hay art\xedculos","itemsRemaining":"Quedan {{count}} art\xedculos","summaryCompleted":"{{completed}} de {{total}} art\xedculos completados","addItem":"A\xf1adir Art\xedculo","deleteList":"Eliminar Lista","shareList":"Compartir Lista"},"addItem":{"title":"A\xf1adir Art\xedculo","nameLabel":"Nombre del Art\xedculo","namePlaceholder":"Leche de almendras, pan, etc.","quantityLabel":"Cantidad","unitLabel":"Unidad","units":{"unit":"unidad","kg":"kg","g":"g","lb":"lb","oz":"oz","l":"L","ml":"mL"},"adding":"A\xf1adiendo..."},"item":{"checked":"Comprado","unchecked":"No comprado","delete":"Eliminar"},"empty":{"title":"A\xfan No Hay Listas de Compras","description":"\xa1Crea tu primera lista de compras para comenzar!","action":"Crear Lista"},"allergenWarning":{"title":"Advertencia de Al\xe9rgeno","contains":"Este producto contiene","youAreAllergicTo":"Eres al\xe9rgico a","proceed":"A\xf1adir de Todos Modos","cancel":"Cancelar"},"messages":{"listCreated":"\xa1Lista de compras creada!","listDeleted":"Lista de compras eliminada","itemAdded":"Art\xedculo a\xf1adido a la lista","itemRemoved":"Art\xedculo eliminado","itemChecked":"Art\xedculo marcado como comprado","itemUnchecked":"Art\xedculo marcado como no comprado"},"loading":"Cargando listas de compras...","errors":{"load":"Error al cargar las listas de compras","createList":"Error al crear la lista","addItem":"Error al a\xf1adir el art\xedculo","updateItem":"Error al actualizar el art\xedculo","deleteItem":"Error al eliminar el art\xedculo","updateQuantity":"Error al actualizar la cantidad","deleteList":"Error al eliminar la lista"},"safety":{"safeForYou":"Seguro para ti","unknown":"Producto no encontrado en la base de datos","checking":"Comprobando..."}}'),F=JSON.parse('{"title":"Meal Planner","subtitle":"Plan your meals for the week","refresh":"Refresh","loading":"Loading your personalized meal plan...","tabs":{"mealPlan":"Meal Plan","recipes":"Recipes"},"mealPlan":{"generate":"Generate 7-Day Plan","regenerate":"Regenerate Plan","generating":"Generating meal plan...","viewRecipe":"View Recipe","swap":"Swap Recipe","addToList":"Add to Shopping List","carbBudget":"Daily Carb Budget","avgPerMeal":"Avg Per Meal","totalCarbs":"Total Carbs","percentOfLimit":"{{percent}}% of limit","servings":"{{count}} serving","servings_plural":"{{count}} servings","carbsConsumed":"Carbs Consumed","remaining":"Remaining","dayOfWeek":{"monday":"Monday","tuesday":"Tuesday","wednesday":"Wednesday","thursday":"Thursday","friday":"Friday","saturday":"Saturday","sunday":"Sunday"},"mealTypes":{"breakfast":"Breakfast","lunch":"Lunch","dinner":"Dinner","snack":"Snack"}},"recipes":{"search":"Search recipes...","filters":{"all":"All Recipes","breakfast":"Breakfast","lunch":"Lunch","dinner":"Dinner","snacks":"Snacks"},"details":{"servings":"Servings","prepTime":"Prep Time","cookTime":"Cook Time","totalTime":"Total Time","difficulty":"Difficulty","minutes":"minutes","carbs":"Carbs","protein":"Protein","calories":"cal","fiber":"Fiber","ingredients":"Ingredients","instructions":"Instructions","nutritionFacts":"Nutrition Facts","perServing":"Per Serving","allergens":"Allergens","tags":"Tags"}},"shopping":{"generateList":"Generate Shopping List from Meal Plan","generating":"Generating shopping list...","newListName":"Recipe Ingredients","newListDescription":"Auto-generated from recipe","weeklyMealPlanName":"Weekly Meal Plan","weeklyMealPlanDescription":"Auto-generated from meal planner","itemsAddedSuccess":"✅ Added {{count}} items to your shopping list!","itemsAddedError":"Failed to add to shopping list: {{message}}","generateError":"Failed to generate shopping list: {{message}}","loginRequiredGenerate":"Please log in to generate a shopping list","success":"Shopping list created successfully!","error":"Failed to generate shopping list"},"errors":{"loginRequired":"Please log in to view your meal plan","loadFailed":"Failed to load meal plan","loadTitle":"Failed to load meal plan","recipeLoadFailed":"Failed to load recipe details","noRecipesFound":"No recipes found in meal plan","loginRequiredAddToList":"Please log in to add to shopping list"},"messages":{"planGenerated":"7-day meal plan generated!","recipeSwapped":"Recipe swapped successfully","addedToList":"Ingredients added to shopping list","noRecipes":"No recipes found","loadingRecipes":"Loading recipes..."},"personalizedPlan":{"title":"Your Personalized Plan:","allergensFiltered":"All meals filtered for your allergens: {{allergens}}","carbBudget":"Daily carb budget: {{budget}}g","daysPlanned":"{{days}} days of diabetes-friendly meals planned","smartRecipes":"Smart recipes with excellent carb quality","autoGenerate":"Auto-generate shopping list with all ingredients","none":"None"}}'),R=JSON.parse('{"title":"תכנון ארוחות","subtitle":"תכנן את הארוחות שלך לשבוע","refresh":"רענן","loading":"טוען את תוכנית הארוחות האישית שלך...","tabs":{"mealPlan":"תוכנית ארוחות","recipes":"מתכונים"},"mealPlan":{"generate":"צור תוכנית ל-7 ימים","regenerate":"צור תוכנית מחדש","generating":"יוצר תוכנית ארוחות...","viewRecipe":"צפה במתכון","swap":"החלף מתכון","addToList":"הוסף לרשימת קניות","carbBudget":"תקציב פחמימות יומי","avgPerMeal":"ממוצע לארוחה","totalCarbs":"סך פחמימות","percentOfLimit":"{{percent}}% מהגבול","servings":"{{count}} מנה","servings_plural":"{{count}} מנות","carbsConsumed":"פחמימות שנצרכו","remaining":"נותר","dayOfWeek":{"monday":"יום שני","tuesday":"יום שלישי","wednesday":"יום רביעי","thursday":"יום חמישי","friday":"יום שישי","saturday":"שבת","sunday":"יום ראשון"},"mealTypes":{"breakfast":"ארוחת בוקר","lunch":"ארוחת צהריים","dinner":"ארוחת ערב","snack":"חטיף"}},"recipes":{"search":"חפש מתכונים...","filters":{"all":"כל המתכונים","breakfast":"ארוחת בוקר","lunch":"ארוחת צהריים","dinner":"ארוחת ערב","snacks":"חטיפים"},"details":{"servings":"מנות","prepTime":"זמן הכנה","cookTime":"זמן בישול","totalTime":"זמן כולל","difficulty":"רמת קושי","minutes":"דקות","carbs":"פחמימות","protein":"חלבון","calories":"קלוריות","fiber":"סיבים","ingredients":"מרכיבים","instructions":"הוראות הכנה","nutritionFacts":"ערכים תזונתיים","perServing":"למנה","allergens":"אלרגנים","tags":"תגיות"}},"shopping":{"generateList":"צור רשימת קניות מתוכנית הארוחות","generating":"יוצר רשימת קניות...","newListName":"מרכיבי מתכון","newListDescription":"נוצר אוטומטית ממתכון","weeklyMealPlanName":"תוכנית ארוחות שבועית","weeklyMealPlanDescription":"נוצר אוטומטית מתכנון ארוחות","itemsAddedSuccess":"✅ נוספו {{count}} פריטים לרשימת הקניות שלך!","itemsAddedError":"נכשל בהוספה לרשימת הקניות: {{message}}","generateError":"יצירת רשימת קניות נכשלה: {{message}}","loginRequiredGenerate":"אנא התחבר כדי ליצור רשימת קניות","success":"רשימת קניות נוצרה בהצלחה!","error":"יצירת רשימת קניות נכשלה"},"errors":{"loginRequired":"אנא התחבר כדי לצפות בתוכנית הארוחות שלך","loadFailed":"טעינת תוכנית הארוחות נכשלה","loadTitle":"טעינת תוכנית הארוחות נכשלה","recipeLoadFailed":"טעינת פרטי המתכון נכשלה","noRecipesFound":"לא נמצאו מתכונים בתוכנית הארוחות","loginRequiredAddToList":"אנא התחבר כדי להוסיף לרשימת הקניות"},"messages":{"planGenerated":"תוכנית ארוחות ל-7 ימים נוצרה!","recipeSwapped":"המתכון הוחלף בהצלחה","addedToList":"המרכיבים נוספו לרשימת הקניות","noRecipes":"לא נמצאו מתכונים","loadingRecipes":"טוען מתכונים..."},"personalizedPlan":{"title":"התוכנית האישית שלך:","allergensFiltered":"כל הארוחות מסוננות לפי האלרגנים שלך: {{allergens}}","carbBudget":"תקציב פחמימות יומי: {{budget}}גרם","daysPlanned":"{{days}} ימים של ארוחות מתאימות לסוכרת מתוכננות","smartRecipes":"מתכונים חכמים עם איכות פחמימות מעולה","autoGenerate":"צור אוטומטית רשימת קניות עם כל המרכיבים","none":"אין"}}'),M=JSON.parse('{"title":"Planificador de Comidas","subtitle":"Planifica tus comidas para la semana","refresh":"Actualizar","loading":"Cargando tu plan de comidas personalizado...","tabs":{"mealPlan":"Plan de Comidas","recipes":"Recetas"},"mealPlan":{"generate":"Generar Plan de 7 D\xedas","regenerate":"Regenerar Plan","generating":"Generando plan de comidas...","viewRecipe":"Ver Receta","swap":"Cambiar Receta","addToList":"A\xf1adir a Lista de Compras","carbBudget":"Presupuesto Diario de Carbohidratos","avgPerMeal":"Promedio por Comida","totalCarbs":"Carbohidratos Totales","percentOfLimit":"{{percent}}% del l\xedmite","servings":"{{count}} porci\xf3n","servings_plural":"{{count}} porciones","carbsConsumed":"Carbohidratos Consumidos","remaining":"Restante","dayOfWeek":{"monday":"Lunes","tuesday":"Martes","wednesday":"Mi\xe9rcoles","thursday":"Jueves","friday":"Viernes","saturday":"S\xe1bado","sunday":"Domingo"},"mealTypes":{"breakfast":"Desayuno","lunch":"Almuerzo","dinner":"Cena","snack":"Merienda"}},"recipes":{"search":"Buscar recetas...","filters":{"all":"Todas las Recetas","breakfast":"Desayuno","lunch":"Almuerzo","dinner":"Cena","snacks":"Meriendas"},"details":{"servings":"Porciones","prepTime":"Tiempo de Prep.","cookTime":"Tiempo de Cocci\xf3n","totalTime":"Tiempo Total","difficulty":"Dificultad","minutes":"minutos","carbs":"Carbohidratos","protein":"Prote\xedna","calories":"cal","fiber":"Fibra","ingredients":"Ingredientes","instructions":"Instrucciones","nutritionFacts":"Informaci\xf3n Nutricional","perServing":"Por Porci\xf3n","allergens":"Al\xe9rgenos","tags":"Etiquetas"}},"shopping":{"generateList":"Generar Lista de Compras desde el Plan de Comidas","generating":"Generando lista de compras...","newListName":"Ingredientes de Receta","newListDescription":"Generado autom\xe1ticamente desde receta","weeklyMealPlanName":"Plan de Comidas Semanal","weeklyMealPlanDescription":"Generado autom\xe1ticamente desde planificador de comidas","itemsAddedSuccess":"✅ \xa1Se a\xf1adieron {{count}} art\xedculos a tu lista de compras!","itemsAddedError":"Error al a\xf1adir a la lista de compras: {{message}}","generateError":"Error al generar lista de compras: {{message}}","loginRequiredGenerate":"Por favor inicia sesi\xf3n para generar una lista de compras","success":"\xa1Lista de compras creada exitosamente!","error":"Error al generar lista de compras"},"errors":{"loginRequired":"Por favor inicia sesi\xf3n para ver tu plan de comidas","loadFailed":"Error al cargar el plan de comidas","loadTitle":"Error al cargar el plan de comidas","recipeLoadFailed":"Error al cargar los detalles de la receta","noRecipesFound":"No se encontraron recetas en el plan de comidas","loginRequiredAddToList":"Por favor inicia sesi\xf3n para a\xf1adir a la lista de compras"},"messages":{"planGenerated":"\xa1Plan de comidas de 7 d\xedas generado!","recipeSwapped":"Receta cambiada exitosamente","addedToList":"Ingredientes a\xf1adidos a la lista de compras","noRecipes":"No se encontraron recetas","loadingRecipes":"Cargando recetas..."},"personalizedPlan":{"title":"Tu Plan Personalizado:","allergensFiltered":"Todas las comidas filtradas para tus al\xe9rgenos: {{allergens}}","carbBudget":"Presupuesto diario de carbohidratos: {{budget}}g","daysPlanned":"{{days}} d\xedas de comidas adecuadas para diabetes planificadas","smartRecipes":"Recetas inteligentes con excelente calidad de carbohidratos","autoGenerate":"Generar autom\xe1ticamente lista de compras con todos los ingredientes","none":"Ninguno"}}'),G=JSON.parse('{"title":"Health Profile","subtitle":"Manage your health information","profileTitle":"User","personalInfo":{"title":"Personal Information","displayName":"Display Name","displayNamePlaceholder":"Your preferred name","age":"Age","agePlaceholder":"25","height":"Height (cm)","heightPlaceholder":"170","weight":"Weight (kg)","weightPlaceholder":"70","name":"Name","ageUnit":"years","heightUnit":"cm","weightUnit":"kg","noInfo":"No personal information added yet"},"healthProfile":{"title":"Health Profile","diabetesType":"Diabetes Type","types":{"Type 1":"Type 1","Type 2":"Type 2","Prediabetes":"Prediabetes","Gestational":"Gestational","No Diabetes":"No Diabetes"},"targetGlucose":"Target Blood Glucose Range (mg/dL)","min":"Min","max":"Max","to":"to","dailyCarbLimit":"Daily Carb Limit (grams)","dailyCarbPlaceholder":"200","usesInsulin":"I use insulin","yes":"Yes","no":"No","targetGlucoseDisplay":"Target Blood Glucose","dailyCarbDisplay":"Daily Carb Limit","insulinUse":"Insulin Use"},"allergies":{"title":"Allergies & Intolerances","selectAll":"Select all that apply:","noneSpecified":"No allergies specified"},"settings":{"notifications":"Notification Settings","privacy":"Privacy & Security","logout":"Logout"},"buttons":{"edit":"Edit","save":"Save Changes","saving":"Saving...","cancel":"Cancel"},"profile":{"edit":"Edit","save":"Save Changes","saving":"Saving...","saved":"Profile saved successfully!","error":"Failed to save profile"},"errors":{"noUser":"Not logged in. Please sign in."},"onboarding":{"welcome":"Welcome to SafeCart","subtitle":"Let\'s set up your health profile","step":"Step","of":"of","next":"Next","previous":"Back","finish":"Complete Setup","skip":"Skip for now"},"basicInfo":{"title":"Basic Information","displayName":"Display Name","displayNamePlaceholder":"Your name","age":"Age","agePlaceholder":"Your age","height":"Height (cm)","heightPlaceholder":"170","weight":"Weight (kg)","weightPlaceholder":"70"},"diabetes":{"title":"Diabetes Information","type":"Diabetes Type","types":{"none":"No Diabetes","prediabetes":"Prediabetes","type1":"Type 1","type2":"Type 2","gestational":"Gestational"},"targetGlucose":"Target Glucose Range","min":"Min (mg/dL)","max":"Max (mg/dL)","dailyCarbLimit":"Daily Carb Limit (g)","usesInsulin":"Uses Insulin","yes":"Yes","no":"No"},"allergiesSection":{"title":"Allergies & Intolerances","selectAllergies":"Select your allergies","common":{"peanuts":"Peanuts","treeNuts":"Tree Nuts","milk":"Milk/Dairy","eggs":"Eggs","wheat":"Wheat/Gluten","soy":"Soy","fish":"Fish","shellfish":"Shellfish","sesame":"Sesame"},"dietary":{"vegetarian":"Vegetarian","vegan":"Vegan","kosher":"Kosher","halal":"Halal"}}}'),Z=JSON.parse('{"title":"פרופיל בריאות","subtitle":"נהל את המידע הבריאותי שלך","profileTitle":"משתמש","personalInfo":{"title":"מידע אישי","displayName":"שם תצוגה","displayNamePlaceholder":"השם המועדף שלך","age":"גיל","agePlaceholder":"25","height":"גובה (ס\\"מ)","heightPlaceholder":"170","weight":"משקל (ק\\"ג)","weightPlaceholder":"70","name":"שם","ageUnit":"שנים","heightUnit":"ס\\"מ","weightUnit":"ק\\"ג","noInfo":"עדיין לא נוסף מידע אישי"},"healthProfile":{"title":"פרופיל בריאות","diabetesType":"סוג סוכרת","types":{"Type 1":"סוג 1","Type 2":"סוג 2","Prediabetes":"פרה-סוכרת","Gestational":"הריונית","No Diabetes":"ללא סוכרת"},"targetGlucose":"טווח גלוקוז יעד (mg/dL)","min":"מינימום","max":"מקסימום","to":"עד","dailyCarbLimit":"מגבלת פחמימות יומית (גרם)","dailyCarbPlaceholder":"200","usesInsulin":"אני משתמש באינסולין","yes":"כן","no":"לא","targetGlucoseDisplay":"גלוקוז יעד","dailyCarbDisplay":"מגבלת פחמימות יומית","insulinUse":"שימוש באינסולין"},"allergies":{"title":"אלרגיות ואי סבילות","selectAll":"בחר את כל הרלוונטיות:","noneSpecified":"לא צוינו אלרגיות"},"settings":{"notifications":"הגדרות התראות","privacy":"פרטיות ואבטחה","logout":"התנתק"},"buttons":{"edit":"ערוך","save":"שמור שינויים","saving":"שומר...","cancel":"בטל"},"profile":{"edit":"ערוך","save":"שמור שינויים","saving":"שומר...","saved":"הפרופיל נשמר בהצלחה!","error":"שמירת הפרופיל נכשלה"},"errors":{"noUser":"לא מחובר. אנא התחבר."},"onboarding":{"welcome":"ברוכים הבאים ל-SafeCart","subtitle":"בואו נגדיר את פרופיל הבריאות שלך","step":"שלב","of":"מתוך","next":"הבא","previous":"הקודם","finish":"סיים","skip":"דלג לעת עתה"},"basicInfo":{"title":"מידע בסיסי","displayName":"שם תצוגה","displayNamePlaceholder":"השם שלך","age":"גיל","agePlaceholder":"הגיל שלך","height":"גובה (ס\\"מ)","heightPlaceholder":"170","weight":"משקל (ק\\"ג)","weightPlaceholder":"70"},"diabetes":{"title":"מידע על סוכרת","type":"סוג סוכרת","types":{"none":"ללא סוכרת","prediabetes":"פרה-סוכרת","type1":"סוג 1","type2":"סוג 2","gestational":"הריונית"},"targetGlucose":"טווח גלוקוז יעד","min":"מינימום (mg/dL)","max":"מקסימום (mg/dL)","dailyCarbLimit":"מגבלת פחמימות יומית (גרם)","usesInsulin":"משתמש באינסולין","yes":"כן","no":"לא"},"allergiesSection":{"title":"אלרגיות והגבלות תזונתיות","selectAllergies":"בחר את האלרגיות שלך","common":{"peanuts":"בוטנים","treeNuts":"אגוזים","milk":"חלב/מוצרי חלב","eggs":"ביצים","wheat":"חיטה/גלוטן","soy":"סויה","fish":"דגים","shellfish":"פירות ים","sesame":"שומשום"},"dietary":{"vegetarian":"צמחוני","vegan":"טבעוני","kosher":"כשר","halal":"חלאל"}}}'),B=JSON.parse('{"title":"Perfil de Salud","subtitle":"Administra tu informaci\xf3n de salud","profileTitle":"Usuario","personalInfo":{"title":"Informaci\xf3n Personal","displayName":"Nombre para Mostrar","displayNamePlaceholder":"Tu nombre preferido","age":"Edad","agePlaceholder":"25","height":"Altura (cm)","heightPlaceholder":"170","weight":"Peso (kg)","weightPlaceholder":"70","name":"Nombre","ageUnit":"a\xf1os","heightUnit":"cm","weightUnit":"kg","noInfo":"A\xfan no se ha agregado informaci\xf3n personal"},"healthProfile":{"title":"Perfil de Salud","diabetesType":"Tipo de Diabetes","types":{"Type 1":"Tipo 1","Type 2":"Tipo 2","Prediabetes":"Prediabetes","Gestational":"Gestacional","No Diabetes":"Sin Diabetes"},"targetGlucose":"Rango Objetivo de Glucosa en Sangre (mg/dL)","min":"M\xedn","max":"M\xe1x","to":"a","dailyCarbLimit":"L\xedmite Diario de Carbohidratos (gramos)","dailyCarbPlaceholder":"200","usesInsulin":"Uso insulina","yes":"S\xed","no":"No","targetGlucoseDisplay":"Glucosa Objetivo","dailyCarbDisplay":"L\xedmite Diario de Carbohidratos","insulinUse":"Uso de Insulina"},"allergies":{"title":"Alergias e Intolerancias","selectAll":"Selecciona todas las que apliquen:","noneSpecified":"No se especificaron alergias"},"settings":{"notifications":"Configuraci\xf3n de Notificaciones","privacy":"Privacidad y Seguridad","logout":"Cerrar Sesi\xf3n"},"buttons":{"edit":"Editar","save":"Guardar Cambios","saving":"Guardando...","cancel":"Cancelar"},"profile":{"edit":"Editar","save":"Guardar Cambios","saving":"Guardando...","saved":"\xa1Perfil guardado exitosamente!","error":"Error al guardar el perfil"},"errors":{"noUser":"No has iniciado sesi\xf3n. Por favor inicia sesi\xf3n."},"onboarding":{"welcome":"Bienvenido a SafeCart","subtitle":"Configuremos tu perfil de salud","step":"Paso","of":"de","next":"Siguiente","previous":"Anterior","finish":"Finalizar","skip":"Omitir por ahora"},"basicInfo":{"title":"Informaci\xf3n B\xe1sica","displayName":"Nombre para Mostrar","displayNamePlaceholder":"Tu nombre","age":"Edad","agePlaceholder":"Tu edad","height":"Altura (cm)","heightPlaceholder":"170","weight":"Peso (kg)","weightPlaceholder":"70"},"diabetes":{"title":"Informaci\xf3n sobre Diabetes","type":"Tipo de Diabetes","types":{"none":"Sin Diabetes","prediabetes":"Prediabetes","type1":"Tipo 1","type2":"Tipo 2","gestational":"Gestacional"},"targetGlucose":"Rango Objetivo de Glucosa","min":"M\xedn (mg/dL)","max":"M\xe1x (mg/dL)","dailyCarbLimit":"L\xedmite Diario de Carbohidratos (g)","usesInsulin":"Usa Insulina","yes":"S\xed","no":"No"},"allergiesSection":{"title":"Alergias y Restricciones Diet\xe9ticas","selectAllergies":"Selecciona tus alergias","common":{"peanuts":"Man\xed","treeNuts":"Frutos Secos","milk":"Leche/L\xe1cteos","eggs":"Huevos","wheat":"Trigo/Gluten","soy":"Soja","fish":"Pescado","shellfish":"Mariscos","sesame":"S\xe9samo"},"dietary":{"vegetarian":"Vegetariano","vegan":"Vegano","kosher":"Kosher","halal":"Halal"}}}'),U=JSON.parse('{"title":"Product Discovery","subtitle":"Find safe products for you","search":{"placeholder":"Search products (e.g., almond milk, gluten-free bread)...","searching":"Searching...","button":"Search","noResults":"No products found. Try a different search!","browseAll":"Browse All Products (50+)"},"filters":{"title":"Filters","clear":"Clear","category":"Category","avoidAllergens":"Avoid Allergens","maxCarbs":"Max Carbs (g)","maxCarbsPlaceholder":"Leave empty for no limit","categories":{"Dairy":"Dairy","Produce":"Produce","Meat & Seafood":"Meat & Seafood","Bakery":"Bakery","Snacks":"Snacks","Beverages":"Beverages","Pantry":"Pantry","Frozen":"Frozen"}},"results":{"found":"Found {{count}} products","loading":"Searching products...","empty":{"title":"Start searching for products you love!","description":"Search by product name, brand, or ingredient. Use filters to match your dietary needs."},"noResults":"No products found. Try a different search!"},"product":{"safety":{"safe":"Safe","checkLabels":"Check Labels","danger":"Danger!"},"dangerWarning":"⚠️ Contains Your Allergens!","containsAllergens":"This product contains: {{allergens}}","nutrition":{"netCarbs":"Net Carbs","sugar":"Sugar","protein":"Protein","calories":"Calories"},"contains":"Contains:","allergens":{"peanuts":"Peanuts","tree_nuts":"Tree Nuts","milk":"Milk","eggs":"Eggs","soy":"Soy","wheat":"Wheat","fish":"Fish","shellfish":"Shellfish"}},"errors":{"search":"Please enter a search term or select filters to browse products","searchFailed":"Failed to search products: {{message}}"},"badges":{"gi":"GI","gl":"GL","netCarbs":"g","sugar":"g","protein":"g"}}'),O=JSON.parse('{"title":"גילוי מוצרים","subtitle":"מצא מוצרים בטוחים עבורך","search":{"placeholder":"חפש מוצרים (למשל, חלב שקדים, לחם ללא גלוטן)...","searching":"מחפש...","button":"חפש","noResults":"לא נמצאו מוצרים. נסה חיפוש אחר!","browseAll":"עיין בכל המוצרים (50+)"},"filters":{"title":"מסננים","clear":"נקה","category":"קטגוריה","avoidAllergens":"הימנע מאלרגנים","maxCarbs":"מקסימום פחמימות (גרם)","maxCarbsPlaceholder":"השאר ריק ללא הגבלה","categories":{"Dairy":"מוצרי חלב","Produce":"מוצרים טריים","Meat & Seafood":"בשר ודגים","Bakery":"מאפייה","Snacks":"חטיפים","Beverages":"משקאות","Pantry":"מזווה","Frozen":"קפואים"}},"results":{"found":"נמצאו {{count}} מוצרים","loading":"מחפש מוצרים...","empty":{"title":"התחל לחפש מוצרים שאתה אוהב!","description":"חפש לפי שם מוצר, מותג או מרכיב. השתמש במסננים כדי להתאים לצרכי התזונה שלך."},"noResults":"לא נמצאו מוצרים. נסה חיפוש אחר!"},"product":{"safety":{"safe":"בטוח","checkLabels":"בדוק תוויות","danger":"סכנה!"},"dangerWarning":"⚠️ מכיל את האלרגנים שלך!","containsAllergens":"מוצר זה מכיל: {{allergens}}","nutrition":{"netCarbs":"פחמימות נטו","sugar":"סוכר","protein":"חלבון","calories":"קלוריות"},"contains":"מכיל:","allergens":{"peanuts":"בוטנים","tree_nuts":"אגוזים","milk":"חלב","eggs":"ביצים","soy":"סויה","wheat":"חיטה","fish":"דגים","shellfish":"מאכלי ים"}},"errors":{"search":"אנא הזן מונח חיפוש או בחר מסננים כדי לעיין במוצרים","searchFailed":"חיפוש מוצרים נכשל: {{message}}"},"badges":{"gi":"GI","gl":"GL","netCarbs":"גרם","sugar":"גרם","protein":"גרם"}}'),q=JSON.parse('{"title":"Descubrir Productos","subtitle":"Encuentra productos seguros para ti","search":{"placeholder":"Buscar productos (ej., leche de almendras, pan sin gluten)...","searching":"Buscando...","button":"Buscar","noResults":"No se encontraron productos. \xa1Prueba con otra b\xfasqueda!","browseAll":"Explorar Todos los Productos (50+)"},"filters":{"title":"Filtros","clear":"Limpiar","category":"Categor\xeda","avoidAllergens":"Evitar Al\xe9rgenos","maxCarbs":"Carbohidratos M\xe1x. (g)","maxCarbsPlaceholder":"Deja vac\xedo para sin l\xedmite","categories":{"Dairy":"L\xe1cteos","Produce":"Productos Frescos","Meat & Seafood":"Carnes y Mariscos","Bakery":"Panader\xeda","Snacks":"Meriendas","Beverages":"Bebidas","Pantry":"Despensa","Frozen":"Congelados"}},"results":{"found":"Se encontraron {{count}} productos","loading":"Buscando productos...","empty":{"title":"\xa1Comienza a buscar productos que te gusten!","description":"Busca por nombre de producto, marca o ingrediente. Usa filtros para coincidir con tus necesidades diet\xe9ticas."},"noResults":"No se encontraron productos. \xa1Prueba con otra b\xfasqueda!"},"product":{"safety":{"safe":"Seguro","checkLabels":"Verifica Etiquetas","danger":"\xa1Peligro!"},"dangerWarning":"⚠️ \xa1Contiene tus Al\xe9rgenos!","containsAllergens":"Este producto contiene: {{allergens}}","nutrition":{"netCarbs":"Carbohidratos Netos","sugar":"Az\xfacar","protein":"Prote\xedna","calories":"Calor\xedas"},"contains":"Contiene:","allergens":{"peanuts":"Cacahuetes","tree_nuts":"Frutos Secos","milk":"Leche","eggs":"Huevos","soy":"Soja","wheat":"Trigo","fish":"Pescado","shellfish":"Mariscos"}},"errors":{"search":"Por favor ingresa un t\xe9rmino de b\xfasqueda o selecciona filtros para explorar productos","searchFailed":"Error al buscar productos: {{message}}"},"badges":{"gi":"GI","gl":"GL","netCarbs":"g","sugar":"g","protein":"g"}}'),z=JSON.parse('{"title":"Health Analytics","subtitle":"Your personalized health insights and trends","emptyState":{"title":"No Data Yet","description":"Start scanning products and tracking meals to see your health analytics!","retry":"Retry Loading"},"timeRange":{"days":"{{count}} Days"},"metrics":{"safetyScore":"Safety Score","streak":"Day Streak","streakSubtext":"Safe shopping days","avgCarbs":"Avg Daily Carbs","mealsLogged":"Meals Logged","safeItems":"safe","items":"items","of":"of","limit":"limit"},"carbBudget":{"title":"Daily Carb Budget","dailyAvg":"Daily Avg","remaining":"Remaining","protein":"Protein"},"insights":{"title":"Insights & Recommendations","perfectSafety":"Perfect safety score! All {{count}} items are safe for you.","greatCarbControl":"Great carb control! You\'re staying within your budget.","tryMealPlanner":"Try the Meal Planner to get personalized diabetes-friendly recipes!"},"dangerZone":{"title":"Allergen Warning!","description":"We detected {{count}} dangerous item in your shopping lists that contain allergens you\'re sensitive to.","description_plural":"We detected {{count}} dangerous items in your shopping lists that contain allergens you\'re sensitive to.","button":"Review Dangerous Items"},"summary":{"title":"Summary (Last {{days}} Days)","itemsScanned":"Items Scanned","safeItems":"Safe Items","mealsTracked":"Meals Tracked","safetyScore":"Safety Score"}}'),_=JSON.parse('{"title":"ניתוח בריאות","subtitle":"התובנות והמגמות הבריאותיות האישיות שלך","emptyState":{"title":"אין נתונים עדיין","description":"התחל לסרוק מוצרים ולעקוב אחר ארוחות כדי לראות את ניתוח הבריאות שלך!","retry":"נסה שוב לטעון"},"timeRange":{"days":"{{count}} ימים"},"metrics":{"safetyScore":"ציון בטיחות","streak":"רצף ימים","streakSubtext":"ימי קניות בטוחים","avgCarbs":"פחמימות יומיות ממוצעות","mealsLogged":"ארוחות שנרשמו","safeItems":"בטוח","items":"פריטים","of":"מתוך","limit":"הגבלה"},"carbBudget":{"title":"תקציב פחמימות יומי","dailyAvg":"ממוצע יומי","remaining":"נותר","protein":"חלבון"},"insights":{"title":"תובנות והמלצות","perfectSafety":"ציון בטיחות מושלם! כל {{count}} הפריטים בטוחים עבורך.","greatCarbControl":"בקרת פחמימות מעולה! אתה נשאר בתוך התקציב שלך.","tryMealPlanner":"נסה את מתכנן הארוחות לקבלת מתכונים מותאמים אישית לסוכרת!"},"dangerZone":{"title":"אזהרת אלרגן!","description":"זיהינו {{count}} פריטים מסוכנים ברשימות הקניות שלך שמכילים אלרגנים שאתה רגיש אליהם.","button":"בדוק פריטים מסוכנים"},"summary":{"title":"סיכום ({{days}} ימים אחרונים)","itemsScanned":"פריטים שנסרקו","safeItems":"פריטים בטוחים","mealsTracked":"ארוחות שעקבנו","safetyScore":"ציון בטיחות"}}'),H=JSON.parse('{"title":"An\xe1lisis de Salud","subtitle":"Tus perspectivas y tendencias de salud personalizadas","emptyState":{"title":"Sin Datos A\xfan","description":"\xa1Comienza a escanear productos y rastrear comidas para ver tu an\xe1lisis de salud!","retry":"Reintentar Carga"},"timeRange":{"days":"{{count}} D\xedas"},"metrics":{"safetyScore":"Puntuaci\xf3n de Seguridad","streak":"Racha de D\xedas","streakSubtext":"D\xedas de compras seguras","avgCarbs":"Carbohidratos Diarios Promedio","mealsLogged":"Comidas Registradas","safeItems":"seguro","items":"art\xedculos","of":"de","limit":"l\xedmite"},"carbBudget":{"title":"Presupuesto Diario de Carbohidratos","dailyAvg":"Promedio Diario","remaining":"Restante","protein":"Prote\xedna"},"insights":{"title":"Perspectivas y Recomendaciones","perfectSafety":"\xa1Puntuaci\xf3n de seguridad perfecta! Todos los {{count}} art\xedculos son seguros para ti.","greatCarbControl":"\xa1Excelente control de carbohidratos! Te mantienes dentro de tu presupuesto.","tryMealPlanner":"\xa1Prueba el Planificador de Comidas para obtener recetas personalizadas adecuadas para diabetes!"},"dangerZone":{"title":"\xa1Advertencia de Al\xe9rgeno!","description":"Detectamos {{count}} art\xedculos peligrosos en tus listas de compras que contienen al\xe9rgenos a los que eres sensible.","button":"Revisar Art\xedculos Peligrosos"},"summary":{"title":"Resumen (\xdaltimos {{days}} D\xedas)","itemsScanned":"Art\xedculos Escaneados","safeItems":"Art\xedculos Seguros","mealsTracked":"Comidas Registradas","safetyScore":"Puntuaci\xf3n de Seguridad"}}'),V=JSON.parse('{"title":"Settings","subtitle":"Customize your SafeCart experience","navigation":{"title":"Navigation Tabs","description":"Choose which tabs to show in the bottom navigation","visible":"visible","required":"Required","tabNames":{"home":"Home","scanner":"Scanner","shopping":"Shopping Lists","meals":"Meal Planner","inventory":"Inventory","discover":"Product Discovery","analytics":"Analytics","community":"Community","profile":"Profile"},"tabDescriptions":{"home":"Dashboard with quick stats","scanner":"Scan product barcodes","shopping":"Manage your shopping lists","meals":"Plan diabetes-friendly meals","inventory":"Track pantry items","discover":"Browse safe products","analytics":"Detailed health insights & AI recommendations","community":"Share tips and recipes","profile":"Your health profile & settings"},"tips":{"title":"\uD83D\uDCA1 Tip:","text":"Hide tabs you don\'t use to simplify your navigation. You can always show them again later. The Analytics tab will always be accessible from the \\"View Analytics\\" button on the Home page, even if hidden."},"alerts":{"requiredTab":"{{tab}} tab is required and cannot be hidden"},"confirmation":{"reset":"Reset all tabs to default visibility?"}},"buttons":{"save":"Save Changes","saving":"Saving...","saved":"Saved!","reset":"Reset to Default"},"sections":{"profile":{"title":"Your Profile","description":"Manage health profile and personal info"},"notifications":{"title":"Notifications","description":"Manage alerts and reminders"},"privacy":{"title":"Privacy & Security","description":"Control your data and permissions"},"appearance":{"title":"Appearance","description":"Theme, colors, and display options"}},"tabs":{"general":"General","profile":"Profile","appearance":"Appearance","notifications":"Notifications"},"tabVisibility":{"title":"Tab Visibility","description":"Choose which tabs to show in navigation","alwaysVisible":"Always visible","save":"Save Changes","saving":"Saving...","saved":"Settings saved!","reset":"Reset to Default"},"profile":{"viewProfile":"View Your Profile","edit":"Edit Profile"},"language":{"title":"Language","description":"Choose your preferred language"}}'),J=JSON.parse('{"title":"הגדרות","subtitle":"התאם את החוויה שלך ב-SafeCart","navigation":{"title":"כרטיסיות ניווט","description":"בחר אילו כרטיסיות להציג בניווט התחתון","visible":"גלוי","required":"נדרש","tabNames":{"home":"בית","scanner":"סורק","shopping":"רשימות קניות","meals":"תכנון ארוחות","inventory":"מלאי","discover":"גילוי מוצרים","analytics":"אנליטיקה","community":"קהילה","profile":"פרופיל"},"tabDescriptions":{"home":"לוח עם סטטיסטיקות מהירות","scanner":"סרוק ברקודים של מוצרים","shopping":"נהל את רשימות הקניות שלך","meals":"תכנן ארוחות ידידותיות לסוכרת","inventory":"עקוב אחר פריטי המטבח","discover":"עיין במוצרים בטוחים","analytics":"תובנות בריאות מפורטות והמלצות AI","community":"שתף טיפים ומתכונים","profile":"פרופיל הבריאות וההגדרות שלך"},"tips":{"title":"\uD83D\uDCA1 טיפ:","text":"הסתר כרטיסיות שאתה לא משתמש בהן כדי לפשט את הניווט שלך. אתה תמיד יכול להציג אותן שוב מאוחר יותר. כרטיסיית Analytics תמיד תהיה נגישה מהכפתור \\"צפה באנליטיקה\\" בדף הבית, גם אם היא מוסתרת."},"alerts":{"requiredTab":"כרטיסיית {{tab}} נדרשת ולא ניתן להסתיר אותה"},"confirmation":{"reset":"לאפס את כל הכרטיסיות לנראות ברירת מחדל?"}},"buttons":{"save":"שמור שינויים","saving":"שומר...","saved":"נשמר!","reset":"אפס לברירת מחדל"},"sections":{"profile":{"title":"הפרופיל שלך","description":"נהל את פרופיל הבריאות והמידע האישי"},"notifications":{"title":"התראות","description":"נהל התראות ותזכורות"},"privacy":{"title":"פרטיות ואבטחה","description":"בצע שליטה בנתונים והרשאות"},"appearance":{"title":"מראה","description":"ערכת נושא, צבעים ואפשרויות תצוגה"}},"tabs":{"general":"כללי","profile":"פרופיל","appearance":"מראה","notifications":"התראות"},"tabVisibility":{"title":"נראות כרטיסיות","description":"בחר אילו כרטיסיות להציג בניווט","alwaysVisible":"תמיד גלוי","save":"שמור שינויים","saving":"שומר...","saved":"ההגדרות נשמרו!","reset":"אפס לברירת מחדל"},"profile":{"viewProfile":"צפה בפרופיל שלך","edit":"ערוך פרופיל"},"language":{"title":"שפה","description":"בחר את השפה המועדפת שלך"}}'),W=JSON.parse('{"title":"Configuraci\xf3n","subtitle":"Personaliza tu experiencia en SafeCart","navigation":{"title":"Pesta\xf1as de Navegaci\xf3n","description":"Elige qu\xe9 pesta\xf1as mostrar en la navegaci\xf3n inferior","visible":"visible","required":"Requerido","tabNames":{"home":"Inicio","scanner":"Esc\xe1ner","shopping":"Listas de Compras","meals":"Planificador de Comidas","inventory":"Inventario","discover":"Descubrimiento de Productos","analytics":"An\xe1lisis","community":"Comunidad","profile":"Perfil"},"tabDescriptions":{"home":"Panel con estad\xedsticas r\xe1pidas","scanner":"Escanear c\xf3digos de barras de productos","shopping":"Gestionar tus listas de compras","meals":"Planificar comidas aptas para diab\xe9ticos","inventory":"Rastrear art\xedculos de despensa","discover":"Navegar productos seguros","analytics":"Insights detallados de salud y recomendaciones de IA","community":"Compartir consejos y recetas","profile":"Tu perfil de salud y configuraci\xf3n"},"tips":{"title":"\uD83D\uDCA1 Consejo:","text":"Oculta las pesta\xf1as que no usas para simplificar tu navegaci\xf3n. Siempre puedes volver a mostrarlas m\xe1s tarde. La pesta\xf1a Analytics siempre estar\xe1 accesible desde el bot\xf3n \\"Ver Analytics\\" en la p\xe1gina de Inicio, incluso si est\xe1 oculta."},"alerts":{"requiredTab":"La pesta\xf1a {{tab}} es requerida y no se puede ocultar"},"confirmation":{"reset":"\xbfRestablecer todas las pesta\xf1as a la visibilidad por defecto?"}},"buttons":{"save":"Guardar Cambios","saving":"Guardando...","saved":"\xa1Guardado!","reset":"Restablecer a Predeterminado"},"sections":{"profile":{"title":"Tu Perfil","description":"Gestiona tu perfil de salud e informaci\xf3n personal"},"notifications":{"title":"Notificaciones","description":"Gestiona alertas y recordatorios"},"privacy":{"title":"Privacidad y Seguridad","description":"Controla tus datos y permisos"},"appearance":{"title":"Apariencia","description":"Tema, colores y opciones de visualizaci\xf3n"}},"tabs":{"general":"General","profile":"Perfil","appearance":"Apariencia","notifications":"Notificaciones"},"tabVisibility":{"title":"Visibilidad de Pesta\xf1as","description":"Elige qu\xe9 pesta\xf1as mostrar en la navegaci\xf3n","alwaysVisible":"Siempre visible","save":"Guardar Cambios","saving":"Guardando...","saved":"\xa1Configuraci\xf3n guardada!","reset":"Restablecer a Predeterminado"},"profile":{"viewProfile":"Ver Tu Perfil","edit":"Editar Perfil"},"language":{"title":"Idioma","description":"Elige tu idioma preferido"}}'),Y=JSON.parse('{"title":"My Inventory","subtitle":"Track your pantry items","loading":"Loading inventory...","buttons":{"quickScan":"Quick Scan","addItem":"Add Item"},"stats":{"totalItems":"Total Items","expiringSoon":"Expiring Soon","expired":"Expired","lowStock":"Low Stock"},"search":{"placeholder":"Search inventory..."},"filters":{"all":"All","locations":{"pantry":"Pantry","fridge":"Fridge","freezer":"Freezer","other":"Other"}},"empty":{"title":"No items in inventory","description":"Start by scanning barcodes or adding items manually","action":"Start Quick Scan Mode"},"badges":{"lowStock":"Low Stock"},"status":{"noExpiration":"No expiration","expired":"Expired","expiresToday":"Expires today!","expiresTomorrow":"Expires tomorrow","daysLeft":"{{count}} days left","daysRemaining":"{{count}} days","fresh":"Fresh"},"delete":{"confirm":"Remove this item from inventory?","error":"Failed to delete item"},"scanning":{"title":"Quick Scan Mode","description":"Scan barcodes as you unpack groceries. Items are added instantly with smart defaults!","itemsScanned":"Items scanned: {{count}}","barcode":"Barcode","barcodePlaceholder":"Enter or scan barcode...","quantity":"Quantity","location":"Location","scanning":"Scanning...","scanAndAdd":"Scan & Add","success":"Item added! Scan next item or click Done.","errors":{"barcodeRequired":"Please enter a barcode","productNotFound":"Product not found. Try manual entry instead."}},"modals":{"addItem":{"title":"Add Item Manually","description":"Manual entry form coming soon! Use Quick Scan for now."},"editItem":{"title":"Edit: {{name}}","description":"Edit form coming soon!"}}}'),K=JSON.parse('{"title":"המלאי שלי","subtitle":"עקוב אחר פריטי המזווה שלך","loading":"טוען מלאי...","buttons":{"quickScan":"סריקה מהירה","addItem":"הוסף פריט"},"stats":{"totalItems":"פריטים בסך הכל","expiringSoon":"מתפוגג בקרוב","expired":"פג תוקף","lowStock":"מלאי נמוך"},"search":{"placeholder":"חפש במלאי..."},"filters":{"all":"הכל","locations":{"pantry":"מזווה","fridge":"מקרר","freezer":"מקפיא","other":"אחר"}},"empty":{"title":"אין פריטים במלאי","description":"התחל בסריקת ברקודים או בהוספת פריטים ידנית","action":"התחל מצב סריקה מהירה"},"badges":{"lowStock":"מלאי נמוך"},"status":{"noExpiration":"ללא תאריך תפוגה","expired":"פג תוקף","expiresToday":"פג תוקף היום!","expiresTomorrow":"פג תוקף מחר","daysLeft":"נותרו {{count}} ימים","daysRemaining":"{{count}} ימים","fresh":"טרי"},"delete":{"confirm":"הסר פריט זה מהמלאי?","error":"מחיקת הפריט נכשלה"},"scanning":{"title":"מצב סריקה מהירה","description":"סרוק ברקודים בזמן שאתה מפרק קניות. פריטים מתווספים מיד עם ברירות מחדל חכמות!","itemsScanned":"פריטים שנסרקו: {{count}}","barcode":"ברקוד","barcodePlaceholder":"הזן או סרוק ברקוד...","quantity":"כמות","location":"מיקום","scanning":"סורק...","scanAndAdd":"סרוק והוסף","success":"פריט נוסף! סרוק את הפריט הבא או לחץ על סיום.","errors":{"barcodeRequired":"אנא הזן ברקוד","productNotFound":"מוצר לא נמצא. נסה הזנה ידנית במקום."}},"modals":{"addItem":{"title":"הוסף פריט ידנית","description":"טופס הזנה ידנית בקרוב! השתמש בסריקה מהירה לעכשיו."},"editItem":{"title":"ערוך: {{name}}","description":"טופס עריכה בקרוב!"}}}'),$=JSON.parse('{"title":"Mi Inventario","subtitle":"Rastrea los art\xedculos de tu despensa","loading":"Cargando inventario...","buttons":{"quickScan":"Escanear R\xe1pido","addItem":"A\xf1adir Art\xedculo"},"stats":{"totalItems":"Art\xedculos Totales","expiringSoon":"Expirando Pronto","expired":"Expirados","lowStock":"Stock Bajo"},"search":{"placeholder":"Buscar en inventario..."},"filters":{"all":"Todos","locations":{"pantry":"Despensa","fridge":"Refrigerador","freezer":"Congelador","other":"Otros"}},"empty":{"title":"No hay art\xedculos en el inventario","description":"Comienza escaneando c\xf3digos de barras o a\xf1adiendo art\xedculos manualmente","action":"Iniciar Modo Escaneo R\xe1pido"},"badges":{"lowStock":"Stock Bajo"},"status":{"noExpiration":"Sin expiraci\xf3n","expired":"Expirado","expiresToday":"\xa1Expira hoy!","expiresTomorrow":"Expira ma\xf1ana","daysLeft":"Quedan {{count}} d\xedas","daysRemaining":"{{count}} d\xedas","fresh":"Fresco"},"delete":{"confirm":"\xbfEliminar este art\xedculo del inventario?","error":"Error al eliminar art\xedculo"},"scanning":{"title":"Modo Escaneo R\xe1pido","description":"Escanea c\xf3digos de barras mientras desempaquetas las compras. \xa1Los art\xedculos se a\xf1aden instant\xe1neamente con opciones predeterminadas inteligentes!","itemsScanned":"Art\xedculos escaneados: {{count}}","barcode":"C\xf3digo de Barras","barcodePlaceholder":"Ingresa o escanea c\xf3digo de barras...","quantity":"Cantidad","location":"Ubicaci\xf3n","scanning":"Escaneando...","scanAndAdd":"Escanear y A\xf1adir","success":"\xa1Art\xedculo a\xf1adido! Escanea el siguiente art\xedculo o haz clic en Hecho.","errors":{"barcodeRequired":"Por favor ingresa un c\xf3digo de barras","productNotFound":"Producto no encontrado. Intenta entrada manual en su lugar."}},"modals":{"addItem":{"title":"A\xf1adir Art\xedculo Manualmente","description":"\xa1Formulario de entrada manual pr\xf3ximamente! Usa Escaneo R\xe1pido por ahora."},"editItem":{"title":"Editar: {{name}}","description":"\xa1Formulario de edici\xf3n pr\xf3ximamente!"}}}'),Q=JSON.parse('{"title":"Community Feed","subtitle":"Share and discover","loading":"Loading community posts...","filters":{"all":"All","recipe":"Recipe","tip":"Tip","success_story":"Success Story","following":"Following"},"createPost":{"title":"Create Post","shareButton":"Share something with the community","type":"Type","titleLabel":"Title","contentLabel":"Content","tagsLabel":"Tags (comma-separated)","titlePlaceholder":"Give your post a catchy title...","contentPlaceholder":"Share your thoughts, tips, or success story...","tagsPlaceholder":"diabetic, low-carb, gluten-free...","post":"Post","cancel":"Cancel"},"postTypes":{"recipe":"Recipe","tip":"Tip","success_story":"Success Story","meal_plan":"Meal Plan","shopping_list":"Shopping List"},"empty":{"title":"No posts yet in this category.","subtitle":"Be the first to share something!"},"post":{"comments":"comments","commentPlaceholder":"Write a comment...","loadMore":"Load More"},"errors":{"fillRequired":"Please fill in title and content","createFailed":"Failed to create post. Please try again."}}'),X=JSON.parse('{"title":"פיד קהילה","subtitle":"שתף וגלה","loading":"טוען פוסטים של הקהילה...","filters":{"all":"הכל","recipe":"מתכון","tip":"טיפ","success_story":"סיפור הצלחה","following":"מעקב"},"createPost":{"title":"צור פוסט","shareButton":"שתף משהו עם הקהילה","type":"סוג","titleLabel":"כותרת","contentLabel":"תוכן","tagsLabel":"תגיות (מופרדות בפסיקים)","titlePlaceholder":"תן לפוסט שלך כותרת קליטה...","contentPlaceholder":"שתף את המחשבות, הטיפים או סיפור ההצלחה שלך...","tagsPlaceholder":"סוכרת, דל פחמימות, ללא גלוטן...","post":"פרסם","cancel":"בטל"},"postTypes":{"recipe":"מתכון","tip":"טיפ","success_story":"סיפור הצלחה","meal_plan":"תוכנית ארוחות","shopping_list":"רשימת קניות"},"empty":{"title":"אין עדיין פוסטים בקטגוריה זו.","subtitle":"היה הראשון לשתף משהו!"},"post":{"comments":"תגובות","commentPlaceholder":"כתוב תגובה...","loadMore":"טען עוד"},"errors":{"fillRequired":"אנא מלא כותרת ותוכן","createFailed":"יצירת הפוסט נכשלה. אנא נסה שוב."}}'),ee=JSON.parse('{"title":"Feed de la Comunidad","subtitle":"Comparte y descubre","loading":"Cargando publicaciones de la comunidad...","filters":{"all":"Todos","recipe":"Receta","tip":"Consejo","success_story":"Historia de \xc9xito","following":"Siguiendo"},"createPost":{"title":"Crear Publicaci\xf3n","shareButton":"Comparte algo con la comunidad","type":"Tipo","titleLabel":"T\xedtulo","contentLabel":"Contenido","tagsLabel":"Etiquetas (separadas por comas)","titlePlaceholder":"Dale a tu publicaci\xf3n un t\xedtulo atractivo...","contentPlaceholder":"Comparte tus pensamientos, consejos o historia de \xe9xito...","tagsPlaceholder":"diab\xe9tico, bajo carb, sin gluten...","post":"Publicar","cancel":"Cancelar"},"postTypes":{"recipe":"Receta","tip":"Consejo","success_story":"Historia de \xc9xito","meal_plan":"Plan de Comidas","shopping_list":"Lista de Compras"},"empty":{"title":"A\xfan no hay publicaciones en esta categor\xeda.","subtitle":"\xa1S\xe9 el primero en compartir algo!"},"post":{"comments":"comentarios","commentPlaceholder":"Escribe un comentario...","loadMore":"Cargar M\xe1s"},"errors":{"fillRequired":"Por favor completa el t\xedtulo y el contenido","createFailed":"Error al crear la publicaci\xf3n. Por favor intenta de nuevo."}}'),ea=JSON.parse('{"title":"Health Dashboard","subtitle":"Your personalized health insights","loading":"Loading your health insights...","noData":"No analytics data available yet.","noDataSubtitle":"Start using SafeCart to see your health insights!","period":{"7d":"7d","14d":"14d","30d":"30d"},"stats":{"safetyScore":"Safety Score","safeItems":"safe","totalItems":"total items","safeStreak":"Safe Streak","streakDays":"{{days}} days allergen-free!","streakStart":"Start your streak today!","carbControl":"Carb Control","avgDaily":"Avg {{carbs}}g / {{limit}}g daily","dangersAvoided":"Dangers Avoided","dangersFlagged":"Items flagged with allergen warnings"},"analytics":{"wantMore":"Want More Insights?","wantMoreDesc":"View detailed analytics, trends, AI recommendations, and track your progress over time","viewAnalytics":"View Analytics"},"nutrition":{"title":"Daily Nutrition Tracking","carbs":"Carbs:","protein":"Protein:","carbsGoal":"Carbs (goal: {{limit}}g)","proteinGoal":"Protein (goal: ~100g)"},"nutritionAverages":{"title":"Nutrition Averages","dailyCarbs":"Daily Carbs","dailyProtein":"Daily Protein","dailyCalories":"Daily Calories","mealsTracked":"Meals Tracked"},"shopping":{"title":"Shopping Activity","totalLists":"Total Lists","itemsAdded":"Items Added","completed":"Completed","completionRate":"Completion Rate"},"achievements":{"title":"Achievements","perfectSafety":"Perfect Safety Record","weekStreak":"Week-Long Safe Streak","carbMaster":"Carb Control Master","activeShopper":"Active Shopper","keepGoing":"Keep using SafeCart to unlock achievements!"},"insights":{"perfectSafety":"Perfect safety score! All {{count}} items are safe for you.","dangerousDetected":"{{count}} dangerous items detected! Check allergen warnings carefully.","streakAchievement":"Amazing! {{days}}-day streak of allergen-safe shopping!","greatCarbControl":"Great carb control! You\'re staying within your budget.","reduceCarbsTip":"Consider reducing carbs by {{amount}}g per day.","tryMealPlanner":"Try the Meal Planner to get personalized diabetes-friendly recipes!"}}'),et=JSON.parse('{"title":"לוח בקרת בריאות","subtitle":"תובנות בריאות מותאמות אישית","loading":"טוען את תובנות הבריאות שלך...","noData":"אין עדיין נתוני ניתוח זמינים.","noDataSubtitle":"התחל להשתמש ב-SafeCart כדי לראות את תובנות הבריאות שלך!","period":{"7d":"7 ימים","14d":"14 ימים","30d":"30 ימים"},"stats":{"safetyScore":"ציון בטיחות","safeItems":"בטוח","totalItems":"סך פריטים","safeStreak":"רצף בטוח","streakDays":"{{days}} ימים ללא אלרגנים!","streakStart":"התחל את הרצף שלך היום!","carbControl":"בקרת פחמימות","avgDaily":"ממוצע {{carbs}}ג\' / {{limit}}ג\' יומי","dangersAvoided":"סכנות שנמנעו","dangersFlagged":"פריטים שסומנו עם אזהרות אלרגן"},"analytics":{"wantMore":"רוצה עוד תובנות?","wantMoreDesc":"צפה בניתוח מפורט, מגמות, המלצות AI ומעקב אחר ההתקדמות שלך לאורך זמן","viewAnalytics":"צפה בניתוחים"},"nutrition":{"title":"מעקב תזונה יומי","carbs":"פחמימות:","protein":"חלבון:","carbsGoal":"פחמימות (יעד: {{limit}}ג\')","proteinGoal":"חלבון (יעד: ~100ג\')"},"nutritionAverages":{"title":"ממוצעי תזונה","dailyCarbs":"פחמימות יומיות","dailyProtein":"חלבון יומי","dailyCalories":"קלוריות יומיות","mealsTracked":"ארוחות במעקב"},"shopping":{"title":"פעילות קניות","totalLists":"סך רשימות","itemsAdded":"פריטים שנוספו","completed":"הושלמו","completionRate":"שיעור השלמה"},"achievements":{"title":"הישגים","perfectSafety":"רקורד בטיחות מושלם","weekStreak":"רצף בטוח של שבוע","carbMaster":"מאסטר בקרת פחמימות","activeShopper":"קונה פעיל","keepGoing":"המשך להשתמש ב-SafeCart כדי לפתוח הישגים!"},"insights":{"perfectSafety":"ציון בטיחות מושלם! כל {{count}} הפריטים בטוחים עבורך.","dangerousDetected":"{{count}} פריטים מסוכנים זוהו! בדוק אזהרות אלרגן בקפידה.","streakAchievement":"מדהים! רצף של {{days}} ימים של קניות בטוחות מאלרגנים!","greatCarbControl":"בקרת פחמימות מעולה! אתה נשאר בתוך התקציב שלך.","reduceCarbsTip":"שקול להפחית פחמימות ב-{{amount}} גרם ליום.","tryMealPlanner":"נסה את מתכנן הארוחות כדי לקבל מתכונים מותאמים אישית לסוכרת!"}}'),es=JSON.parse('{"title":"Panel de Salud","subtitle":"Tus perspectivas de salud personalizadas","loading":"Cargando tus perspectivas de salud...","noData":"No hay datos de an\xe1lisis disponibles todav\xeda.","noDataSubtitle":"\xa1Comienza a usar SafeCart para ver tus perspectivas de salud!","period":{"7d":"7d","14d":"14d","30d":"30d"},"stats":{"safetyScore":"Puntuaci\xf3n de Seguridad","safeItems":"seguro","totalItems":"art\xedculos totales","safeStreak":"Racha Segura","streakDays":"\xa1{{days}} d\xedas sin al\xe9rgenos!","streakStart":"\xa1Comienza tu racha hoy!","carbControl":"Control de Carbohidratos","avgDaily":"Promedio {{carbs}}g / {{limit}}g diario","dangersAvoided":"Peligros Evitados","dangersFlagged":"Art\xedculos marcados con advertencias de al\xe9rgenos"},"analytics":{"wantMore":"\xbfQuieres M\xe1s Perspectivas?","wantMoreDesc":"Ver an\xe1lisis detallados, tendencias, recomendaciones de IA y rastrear tu progreso a lo largo del tiempo","viewAnalytics":"Ver An\xe1lisis"},"nutrition":{"title":"Seguimiento Nutricional Diario","carbs":"Carbohidratos:","protein":"Prote\xedna:","carbsGoal":"Carbohidratos (objetivo: {{limit}}g)","proteinGoal":"Prote\xedna (objetivo: ~100g)"},"nutritionAverages":{"title":"Promedios Nutricionales","dailyCarbs":"Carbohidratos Diarios","dailyProtein":"Prote\xedna Diaria","dailyCalories":"Calor\xedas Diarias","mealsTracked":"Comidas Rastreadas"},"shopping":{"title":"Actividad de Compras","totalLists":"Listas Totales","itemsAdded":"Art\xedculos Agregados","completed":"Completado","completionRate":"Tasa de Finalizaci\xf3n"},"achievements":{"title":"Logros","perfectSafety":"R\xe9cord de Seguridad Perfecto","weekStreak":"Racha Segura de Una Semana","carbMaster":"Maestro del Control de Carbohidratos","activeShopper":"Comprador Activo","keepGoing":"\xa1Sigue usando SafeCart para desbloquear logros!"},"insights":{"perfectSafety":"\xa1Puntuaci\xf3n de seguridad perfecta! Los {{count}} art\xedculos son seguros para ti.","dangerousDetected":"\xa1{{count}} art\xedculos peligrosos detectados! Verifica las advertencias de al\xe9rgenos cuidadosamente.","streakAchievement":"\xa1Incre\xedble! \xa1Racha de {{days}} d\xedas de compras sin al\xe9rgenos!","greatCarbControl":"\xa1Gran control de carbohidratos! Te est\xe1s manteniendo dentro de tu presupuesto.","reduceCarbsTip":"Considera reducir carbohidratos en {{amount}}g por d\xeda.","tryMealPlanner":"\xa1Prueba el Planificador de Comidas para obtener recetas personalizadas para diab\xe9ticos!"}}'),er=JSON.parse('{"tagline":"Shop safely with allergies & diabetes","email":"Email","emailPlaceholder":"you@example.com","password":"Password","passwordPlaceholder":"••••••••","signIn":"Sign In","signUp":"Sign Up","loading":"Loading...","forgotPassword":"Forgot Password?","alreadyHaveAccount":"Already have an account?","dontHaveAccount":"Don\'t have an account?","resetPassword":{"title":"Reset Password","description":"Enter your email address and we\'ll send you a link to reset your password.","emailLabel":"Email Address","sendButton":"Send Reset Link","sending":"Sending...","backToSignIn":"Back to Sign In","successMessage":"Password reset email sent! Check your inbox.","errorEmpty":"Please enter your email address"}}'),ei=JSON.parse('{"tagline":"קנה בבטחה עם אלרגיות וסוכרת","email":"אימייל","emailPlaceholder":"you@example.com","password":"סיסמה","passwordPlaceholder":"••••••••","signIn":"התחבר","signUp":"הירשם","loading":"טוען...","forgotPassword":"שכחת סיסמה?","alreadyHaveAccount":"כבר יש לך חשבון?","dontHaveAccount":"אין לך חשבון?","resetPassword":{"title":"איפוס סיסמה","description":"הזן את כתובת האימייל שלך ונשלח לך קישור לאיפוס הסיסמה.","emailLabel":"כתובת אימייל","sendButton":"שלח קישור לאיפוס","sending":"שולח...","backToSignIn":"חזרה להתחברות","successMessage":"אימייל לאיפוס סיסמה נשלח! בדוק את תיבת הדואר שלך.","errorEmpty":"אנא הזן את כתובת האימייל שלך"}}'),el=JSON.parse('{"tagline":"Compra de forma segura con alergias y diabetes","email":"Correo Electr\xf3nico","emailPlaceholder":"tu@ejemplo.com","password":"Contrase\xf1a","passwordPlaceholder":"••••••••","signIn":"Iniciar Sesi\xf3n","signUp":"Registrarse","loading":"Cargando...","forgotPassword":"\xbfOlvidaste tu contrase\xf1a?","alreadyHaveAccount":"\xbfYa tienes una cuenta?","dontHaveAccount":"\xbfNo tienes una cuenta?","resetPassword":{"title":"Restablecer Contrase\xf1a","description":"Ingresa tu direcci\xf3n de correo electr\xf3nico y te enviaremos un enlace para restablecer tu contrase\xf1a.","emailLabel":"Direcci\xf3n de Correo","sendButton":"Enviar Enlace de Restablecimiento","sending":"Enviando...","backToSignIn":"Volver a Iniciar Sesi\xf3n","successMessage":"\xa1Correo de restablecimiento de contrase\xf1a enviado! Revisa tu bandeja de entrada.","errorEmpty":"Por favor ingresa tu direcci\xf3n de correo electr\xf3nico"}}');C.ZP.use(w.Db).init({resources:{en:{common:S,scanner:D,shopping:E,meals:F,profile:G,discover:U,analytics:z,settings:V,inventory:Y,community:Q,dashboard:ea,auth:er},he:{common:P,scanner:A,shopping:T,meals:R,profile:Z,discover:O,analytics:_,settings:J,inventory:K,community:X,dashboard:et,auth:ei},es:{common:k,scanner:L,shopping:I,meals:M,profile:B,discover:q,analytics:H,settings:W,inventory:$,community:ee,dashboard:es,auth:el}},lng:localStorage.getItem("preferredLanguage")||"en",fallbackLng:"en",defaultNS:"common",interpolation:{escapeValue:!1},react:{useSuspense:!1}}),C.ZP.on("languageChanged",e=>{"undefined"!=typeof document&&(document.documentElement.lang=e,document.documentElement.dir="he"===e?"rtl":"ltr")});var en=t(6065),eo=t(8063),ed=t(9323),ec=t(5731),em=t(3896);function eu(e){var a,t,i,l,n,o,d,m;let u;let{products:p}=e,{t:g}=(0,w.$G)("scanner"),[x,h]=(0,r.useState)(""),[b,f]=(0,r.useState)(null),[v,N]=(0,r.useState)(!1),[C,S]=(0,r.useState)(""),[P,k]=(0,r.useState)(!1),[D,A]=(0,r.useState)(""),[L,E]=(0,r.useState)(null),T=(0,r.useRef)(null),I=(0,r.useRef)(null),[F,R]=(0,r.useState)(!1),M=c.currentUser,G=async()=>{try{if(A(""),E(null),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){A(g("cameraError.notSupported")),E("notSupported");return}if("http:"===window.location.protocol&&"localhost"!==window.location.hostname){A(g("cameraError.httpsRequired")),E("httpsRequired");return}let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});T.current&&(T.current.srcObject=e,I.current=e,k(!0))}catch(e){if(console.error("Camera error:",e),"NotAllowedError"===e.name||"PermissionDeniedError"===e.name)A(g("cameraError.permissionDenied")),E("permissionDenied");else if("NotFoundError"===e.name||"DevicesNotFoundError"===e.name)A(g("cameraError.noCamera")),E("noCamera");else if("NotReadableError"===e.name||"TrackStartError"===e.name)A(g("cameraError.inUse")),E("inUse");else if("OverconstrainedError"===e.name||"ConstraintNotSatisfiedError"===e.name){A(g("cameraError.constraintsFailed")),E("constraintsFailed");try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});T.current&&(T.current.srcObject=e,I.current=e,k(!0),A(""),E(null))}catch(e){A(g("cameraError.unknown")),E("unknown")}}else"SecurityError"===e.name?(A(g("cameraError.securityError")),E("securityError")):(A(g("cameraError.unknown")),E("unknown"))}},Z=()=>{I.current&&(I.current.getTracks().forEach(e=>e.stop()),I.current=null),k(!1)};(0,r.useEffect)(()=>()=>{Z()},[]);let B=async()=>{S(""),N(!0);try{let e=await j.scan(x,null==M?void 0:M.uid);e.found?f({...e.product,safetyAnalysis:e.safetyAnalysis,region:e.region,source:e.source}):(S(g("results.productNotFound")+" "+(e.message||"")),f(null))}catch(e){console.error("Scanner error:",e),S(e.message||g("results.productNotFound")),f(null)}finally{N(!1)}},U=async()=>{if(M&&b)try{R(!0),S("");let e=await y.getUserLists(M.uid);if(0===e.length){let e=await y.create(M.uid,"Shopping List","My shopping list");await y.addItem(e._id,{name:b.name,quantity:1,unit:"unit"}),alert(g("results.addedToNewList"))}else await y.addItem(e[0]._id,{name:b.name,quantity:1,unit:"unit"}),alert(g("results.addedSuccess"));console.log("Product added to shopping list:",b.name)}catch(e){S(g("results.addedError",{defaultValue:"Failed to add to shopping list: {{message}}",message:e.message})),console.error(e)}finally{R(!1)}};return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold mb-2",children:g("title")}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:g("subtitle")}),!P&&(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-6",children:(0,s.jsxs)("p",{className:"text-blue-800 text-sm",children:[(0,s.jsxs)("strong",{children:["\uD83D\uDCA1 ",g("infoTitle",{defaultValue:"Tip:"})]})," ",g("infoTip")]})}),D&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,s.jsx)(en.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-red-700 text-sm font-medium",children:D})]}),"httpsRequired"===L&&(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-red-200",children:(0,s.jsx)("p",{className:"text-red-600 text-xs",children:g("cameraError.whyHttps")})}),"permissionDenied"===L&&(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-red-200",children:(0,s.jsx)("p",{className:"text-red-600 text-xs",children:g("cameraError.howToFix")})})]}),C&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-4 mb-6 flex items-start gap-3",children:[(0,s.jsx)(en.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-red-700 text-sm",children:C})]}),P?(0,s.jsxs)("div",{className:"bg-black rounded-3xl h-80 flex items-center justify-center mb-6 relative overflow-hidden",children:[(0,s.jsx)("video",{ref:T,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),(0,s.jsxs)("div",{className:"absolute top-0 left-0 right-0 bottom-0 border-4 border-purple-500 rounded-3xl pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-purple-500 animate-pulse"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-white text-center",children:[(0,s.jsx)(eo.Z,{className:"w-8 h-8 mx-auto mb-2 animate-pulse"}),(0,s.jsx)("p",{className:"text-sm",children:g("camera.pointAtBarcode")})]})})]})]}):(0,s.jsx)("div",{className:"bg-black rounded-3xl h-80 flex items-center justify-center mb-6 relative overflow-hidden",children:(0,s.jsx)("div",{className:"w-48 h-48 border-4 border-purple-500 rounded-2xl relative animate-pulse",children:(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-purple-500 animate-pulse"})})}),(0,s.jsx)("div",{className:"flex gap-3 mb-6",children:P?(0,s.jsxs)("button",{onClick:Z,className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-xl flex items-center justify-center gap-2 transition font-semibold",children:[(0,s.jsx)(eo.Z,{className:"w-5 h-5"}),g("camera.stop")]}):(0,s.jsxs)("button",{onClick:G,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl flex items-center justify-center gap-2 transition font-semibold",children:[(0,s.jsx)(eo.Z,{className:"w-5 h-5"}),g("camera.start")]})}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg mb-6",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3 font-semibold",children:g("manualEntry.title")}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),onKeyPress:e=>"Enter"===e.key&&B(),placeholder:g("manualEntry.placeholder"),disabled:v,className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none transition disabled:bg-gray-100"}),(0,s.jsx)("button",{onClick:B,disabled:v,className:"bg-gradient-to-r from-purple-600 to-purple-800 hover:from-purple-700 hover:to-purple-900 text-white px-6 py-3 rounded-xl flex items-center gap-2 transition font-semibold disabled:opacity-50",children:v?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ed.Z,{className:"w-5 h-5 animate-spin"}),g("manualEntry.scanning")]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ec.Z,{className:"w-5 h-5"}),g("manualEntry.scanButton")]})})]})]}),b&&(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6 pb-6 border-b-2 border-gray-200",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl flex-shrink-0 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCE6"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-bold",children:b.name}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm",children:[g("results.upc"),": ",b.barcode||b.upc]}),b.region&&(0,s.jsxs)("p",{className:"text-gray-500 text-xs mt-1",children:["\uD83D\uDCCD ",b.region," • ","cache"===b.source?"Cached":"Live data"]})]}),(0,s.jsx)("div",{children:b.safetyAnalysis?"safe"===b.safetyAnalysis.overallSafety?(0,s.jsxs)("div",{className:"bg-green-100 text-green-700 px-4 py-2 rounded-full font-semibold text-sm flex items-center gap-1",children:[(0,s.jsx)(em.Z,{className:"w-4 h-4"}),g("results.badges.safe",{defaultValue:"SAFE"})]}):"warning"===b.safetyAnalysis.overallSafety?(0,s.jsxs)("div",{className:"bg-yellow-100 text-yellow-700 px-4 py-2 rounded-full font-semibold text-sm flex items-center gap-1",children:[(0,s.jsx)(en.Z,{className:"w-4 h-4"}),"WARNING"]}):(0,s.jsxs)("div",{className:"bg-red-100 text-red-700 px-4 py-2 rounded-full font-semibold text-sm flex items-center gap-1",children:[(0,s.jsx)(en.Z,{className:"w-4 h-4"}),"DANGER"]}):(0,s.jsxs)("div",{className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-full font-semibold text-sm flex items-center gap-1",children:[(0,s.jsx)(en.Z,{className:"w-4 h-4"}),g("results.badges.check",{defaultValue:"CHECK"})]})})]}),b.safetyAnalysis&&(0,s.jsxs)(s.Fragment,{children:[(null===(a=b.safetyAnalysis.allergenWarnings)||void 0===a?void 0:a.length)>0&&(0,s.jsx)("div",{className:"mb-6",children:b.safetyAnalysis.allergenWarnings.map((e,a)=>(0,s.jsx)("div",{className:"p-4 rounded-xl mb-2 ".concat("danger"===e.severity?"bg-red-50 border-2 border-red-200":"bg-yellow-50 border-2 border-yellow-200"),children:(0,s.jsx)("p",{className:"font-semibold ".concat("danger"===e.severity?"text-red-700":"text-yellow-700"),children:e.message})},a))}),(null===(t=b.safetyAnalysis.diabetesWarnings)||void 0===t?void 0:t.length)>0&&(0,s.jsx)("div",{className:"mb-6",children:b.safetyAnalysis.diabetesWarnings.map((e,a)=>(0,s.jsx)("div",{className:"bg-orange-50 border-2 border-orange-200 p-4 rounded-xl mb-2",children:(0,s.jsx)("p",{className:"text-orange-700 font-semibold",children:e.message})},a))}),(null===(i=b.safetyAnalysis.recommendations)||void 0===i?void 0:i.length)>0&&(0,s.jsx)("div",{className:"mb-6",children:b.safetyAnalysis.recommendations.map((e,a)=>(0,s.jsx)("div",{className:"bg-blue-50 border-2 border-blue-200 p-3 rounded-xl mb-2",children:(0,s.jsx)("p",{className:"text-blue-700 text-sm",children:e})},a))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-gray-100 p-4 rounded-xl text-center",children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:g("results.nutrition.netCarbs")}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:[b.carbs||(null===(l=b.nutrition)||void 0===l?void 0:l.netCarbs)||g("results.na",{defaultValue:"N/A"}),"g"]})]}),(0,s.jsxs)("div",{className:"bg-gray-100 p-4 rounded-xl text-center",children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:g("results.nutrition.glycemicIndex")}),(0,s.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:b.gi||(null===(n=b.diabetesInfo)||void 0===n?void 0:n.glycemicIndex)||g("results.na",{defaultValue:"N/A"})})]}),(0,s.jsxs)("div",{className:"bg-gray-100 p-4 rounded-xl text-center",children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:g("results.nutrition.sugar")}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:[b.sugar||(null===(o=b.nutrition)||void 0===o?void 0:o.sugar)||g("results.na",{defaultValue:"N/A"}),"g"]})]}),(0,s.jsxs)("div",{className:"bg-gray-100 p-4 rounded-xl text-center",children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:g("results.nutrition.glScore")}),(0,s.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:b.gl||(null===(d=b.diabetesInfo)||void 0===d?void 0:d.glycemicLoad)||g("results.na",{defaultValue:"N/A"})})]})]}),(u=[],((null===(m=b.allergens)||void 0===m?void 0:m.contains)&&Array.isArray(b.allergens.contains)?u=b.allergens.contains:Array.isArray(b.allergens)&&(u=b.allergens),u.length>0)?(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:[g("results.allergens"),":"]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:u.map(e=>(0,s.jsx)("span",{className:"bg-red-100 text-red-700 px-3 py-1 rounded-full text-sm font-medium",children:e},e))})]}):null),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>{h(""),f(null)},className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-900 py-3 rounded-xl font-semibold transition",children:g("results.actions.scanAnother")}),(0,s.jsx)("button",{onClick:U,disabled:F,className:"flex-1 bg-gradient-to-r from-purple-600 to-purple-800 hover:from-purple-700 hover:to-purple-900 text-white py-3 rounded-xl font-semibold transition disabled:opacity-50",children:F?g("results.actions.adding"):g("results.actions.addToList")})]})]})]})}var ep=t(6643),eg=t(3172),ex=t(5820),eh=t(7354),eb=t(997);function ey(e){let{item:a,index:t,onToggle:i,onDelete:l,onUpdateQuantity:n}=e,{t:o}=(0,w.$G)("shopping"),[d,m]=(0,r.useState)("checking"),[u,x]=(0,r.useState)([]),h=c.currentUser;(0,r.useEffect)(()=>{b()},[a.name]);let b=async()=>{try{var e,t,s;if(!h){m("unknown");return}let r=await g.search(a.name,{});if(0===r.length){m("unknown");return}let i=r[0],l=(null===(e=i.allergens)||void 0===e?void 0:e.contains)||[],n=await p.getProfile(h.uid),o=(null===(s=n.healthProfiles)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.allergies)||[],d=l.filter(e=>o.some(a=>a.toLowerCase()===e.toLowerCase()));d.length>0?(m("danger"),x(d)):l.length>0?(m("safe"),x(l)):(m("safe"),x([]))}catch(e){m("unknown")}};return(0,s.jsxs)("div",{className:"p-4 flex items-center gap-4 transition ".concat(a.checked?"bg-gray-50":""," ").concat("danger"===d?"border-l-4 border-red-500":""),children:[(0,s.jsx)("button",{onClick:()=>i(t),className:"flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition ".concat(a.checked?"bg-green-600 border-green-600":"border-gray-300 hover:border-purple-600"),children:a.checked&&(0,s.jsx)(eh.Z,{className:"w-4 h-4 text-white"})}),(0,s.jsx)("div",{className:"flex-shrink-0",children:"checking"===d?(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full animate-pulse"}):"safe"===d?(0,s.jsx)("div",{className:"flex items-center gap-1 text-green-600",children:(0,s.jsx)(ex.Z,{className:"w-5 h-5"})}):"danger"===d?(0,s.jsx)("div",{className:"flex items-center gap-1 text-red-600",children:(0,s.jsx)(en.Z,{className:"w-5 h-5"})}):null}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"font-medium ".concat(a.checked?"line-through text-gray-400":"text-gray-900"),children:a.name}),"danger"===d&&(0,s.jsxs)("span",{className:"bg-red-100 text-red-700 px-2 py-0.5 rounded text-xs font-semibold",children:["⚠️ ",o("allergenWarning.title")]})]}),"checking"!==d&&(0,s.jsx)("p",{className:"text-xs ".concat("danger"===d?"text-red-600":"safe"===d?"text-green-600":"text-gray-500"),children:"safe"===d?o("safety.safeForYou",{defaultValue:"Safe for you"}):"danger"===d?"⚠️ ".concat(o("allergenWarning.contains"),": ").concat(u.join(", ")):"unknown"===d?o("safety.unknown",{defaultValue:"Product not found in database"}):o("safety.checking",{defaultValue:"Checking..."})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>n(t,a.quantity-1),className:"px-2 py-1 bg-gray-200 rounded hover:bg-gray-300 transition",children:"−"}),(0,s.jsx)("span",{className:"w-8 text-center font-semibold",children:a.quantity}),(0,s.jsx)("button",{onClick:()=>n(t,a.quantity+1),className:"px-2 py-1 bg-gray-200 rounded hover:bg-gray-300 transition",children:"+"})]}),(0,s.jsx)("button",{onClick:()=>l(t),className:"text-red-600 hover:text-red-700 transition",children:(0,s.jsx)(eb.Z,{className:"w-5 h-5"})})]})}function ef(){let{t:e}=(0,w.$G)("shopping"),[a,t]=(0,r.useState)([]),[i,l]=(0,r.useState)(null),[n,o]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(!1),[h,b]=(0,r.useState)(""),[f,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1),C=c.currentUser;(0,r.useEffect)(()=>{C&&S()},[C]);let S=async()=>{try{x(!0);let e=await y.getUserLists(C.uid);t(e),e.length>0&&!i&&l(e[0])}catch(a){b(e("errors.load")),console.error(a)}finally{x(!1)}},P=async()=>{if(d.trim())try{j(!0);let e=await y.create(C.uid,d);t([...a,e]),l(e),m(""),N(!1)}catch(a){b(e("errors.createList")),console.error(a)}finally{j(!1)}},k=async()=>{if(n.trim()&&i)try{var a,t,s;let r=null,d=[];try{let e=await g.search(n,{});if(e.length>0){r=e[0],console.log("✅ Found product:",r);let a=[];try{let e=await p.getProfile(C.uid);e.healthProfiles&&e.healthProfiles.length>0&&(a=e.healthProfiles[0].allergies||[],console.log("\uD83D\uDD0D User allergies:",a))}catch(e){console.log("Could not fetch user profile")}if((null===(s=r.allergens)||void 0===s?void 0:s.contains)&&a.length>0){let e=r.allergens.contains.map(e=>e.toLowerCase());a.forEach(a=>{e.includes(a.toLowerCase())&&d.push(a)}),console.log("⚠️ Dangerous allergens found:",d)}}}catch(e){console.log("ℹ️ Product not found in database, adding as text item")}if(await y.addItem(i._id,{name:n,quantity:1,unit:"unit"}),d.length>0){let a="⚠️ ".concat(e("allergenWarning.title"),"\n").concat(e("allergenWarning.contains"),": ").concat(d.join(", "),"\n").concat(e("allergenWarning.youAreAllergicTo"),": ").concat(d.join(", "));alert(a)}else if(r&&(null===(t=r.allergens)||void 0===t?void 0:null===(a=t.contains)||void 0===a?void 0:a.length)>0){let e='ℹ️ Note: "'.concat(r.name,'" contains: ').concat(r.allergens.contains.join(", "),"\n\nThese are safe for you.");console.log(e)}let c=await y.getList(i._id);l(c),o("")}catch(a){b(e("errors.addItem")),console.error(a)}},D=async a=>{if(i)try{let e=i.items[a];await y.updateItem(i._id,a,{checked:!e.checked});let t=await y.getList(i._id);l(t)}catch(a){b(e("errors.updateItem")),console.error(a)}},A=async a=>{if(i)try{await y.deleteItem(i._id,a);let e=await y.getList(i._id);l(e)}catch(a){b(e("errors.deleteItem")),console.error(a)}},L=async(a,t)=>{if(i&&!(t<1))try{await y.updateItem(i._id,a,{quantity:t});let e=await y.getList(i._id);l(e)}catch(a){b(e("errors.updateQuantity")),console.error(a)}},E=async s=>{try{await y.delete(s);let e=a.filter(e=>e._id!==s);t(e),i._id===s&&l(e[0]||null)}catch(a){b(e("errors.deleteList")),console.error(a)}};return u?(0,s.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(ed.Z,{className:"w-8 h-8 animate-spin text-purple-600 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-600",children:e("loading")})]})}):(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(ep.Z,{className:"w-8 h-8 text-purple-600"}),(0,s.jsx)("h2",{className:"text-3xl font-bold",children:e("title")})]}),h&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4 text-red-700 text-sm",children:h}),(0,s.jsxs)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[a.map(e=>(0,s.jsx)("button",{onClick:()=>l(e),className:"px-4 py-2 rounded-lg font-medium whitespace-nowrap transition ".concat((null==i?void 0:i._id)===e._id?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e.name},e._id)),(0,s.jsxs)("button",{onClick:()=>N(!v),className:"px-4 py-2 rounded-lg font-medium bg-green-100 text-green-700 hover:bg-green-200 transition whitespace-nowrap",children:["+ ",e("createList.button")]})]}),v&&(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),placeholder:e("createList.namePlaceholder"),className:"flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none",onKeyPress:e=>"Enter"===e.key&&P()}),(0,s.jsx)("button",{onClick:P,disabled:f,className:"bg-green-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-green-700 transition disabled:opacity-50",children:e("common:buttons.create")}),(0,s.jsx)("button",{onClick:()=>N(!1),className:"bg-gray-400 text-white px-4 py-2 rounded-lg font-semibold hover:bg-gray-500 transition",children:e("common:buttons.cancel")})]})}),i?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg",children:[(0,s.jsxs)("div",{className:"p-6 border-b-2 border-gray-200 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-2xl font-bold",children:i.name}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:e("list.itemsRemaining",{count:i.items.filter(e=>!e.checked).length})})]}),(0,s.jsx)("button",{onClick:()=>E(i._id),className:"text-red-600 hover:text-red-700 font-medium",children:e("list.deleteList")})]}),(0,s.jsx)("div",{className:"p-6 border-b-2 border-gray-100",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:n,onChange:e=>o(e.target.value),placeholder:e("addItem.inputPlaceholder",{defaultValue:e("addItem.namePlaceholder")}),className:"flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none",onKeyPress:e=>"Enter"===e.key&&k()}),(0,s.jsxs)("button",{onClick:k,className:"bg-purple-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-purple-700 transition flex items-center gap-2",children:[(0,s.jsx)(eg.Z,{className:"w-5 h-5"}),e("common:buttons.add")]})]})}),(0,s.jsx)("div",{className:"divide-y",children:0===i.items.length?(0,s.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,s.jsx)(ep.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),(0,s.jsx)("p",{children:e("list.emptyMessage",{defaultValue:e("list.noItems")})})]}):i.items.map((e,a)=>(0,s.jsx)(ey,{item:e,index:a,onToggle:D,onDelete:A,onUpdateQuantity:L},a))}),i.items.length>0&&(0,s.jsx)("div",{className:"bg-purple-50 p-4 text-center text-sm text-gray-600",children:e("list.summaryCompleted",{completed:i.items.filter(e=>e.checked).length,total:i.items.length})})]}):(0,s.jsxs)("div",{className:"bg-white p-12 rounded-lg shadow-lg text-center",children:[(0,s.jsx)(ep.Z,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:e("empty.title")}),(0,s.jsx)("button",{onClick:()=>N(!0),className:"bg-purple-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-purple-700 transition",children:e("empty.action")})]})]})}var ej=t(8623),ev=t(1883),eN=t(5555),ew=t(8099),eC=t(3989),eS=t(5155),eP=t(548),ek=t(527),eD=t(187),eA=t(1266);function eL(e){var a;let{recipe:t,onClose:i,onGenerateShoppingList:l}=e,[n,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(0);if(!t)return null;let m=()=>{n?o(!1):(o(!0),c(0))};t.prepTime,t.cookTime;let u=(null===(a=t.allergens)||void 0===a?void 0:a.contains)&&t.allergens.contains.length>0;return n?(0,s.jsx)("div",{className:"fixed inset-0 bg-white z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("button",{onClick:m,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition",children:[(0,s.jsx)(ev.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Exit Cooking Mode"})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["Step ",d+1," of ",t.instructions.length]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-purple-600 to-purple-800 transition-all duration-300",style:{width:"".concat((d+1)/t.instructions.length*100,"%")}})})}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-2xl p-6 mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-3",children:t.name}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(eN.Z,{className:"w-4 h-4"}),t.prepTime," min prep"]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ew.Z,{className:"w-4 h-4"}),t.cookTime," min cook"]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(eC.Z,{className:"w-4 h-4"}),t.servings," servings"]})]})]}),(0,s.jsxs)("div",{className:"bg-white border-2 border-purple-200 rounded-2xl shadow-xl p-8 mb-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("span",{className:"text-4xl font-bold text-purple-600",children:d+1})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:t.instructions[d]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:()=>{d>0&&c(d-1)},disabled:0===d,className:"px-6 py-3 rounded-lg font-semibold transition ".concat(0===d?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"),children:"Previous Step"}),d<t.instructions.length-1&&(0,s.jsxs)("button",{onClick:()=>{d<t.instructions.length-1&&c(d+1)},className:"px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg font-semibold hover:from-green-700 hover:to-green-800 transition flex items-center gap-2",children:["Next Step",(0,s.jsx)(ex.Z,{className:"w-5 h-5"})]}),d===t.instructions.length-1&&(0,s.jsxs)("button",{onClick:()=>{o(!1),i()},className:"px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg font-semibold hover:from-green-700 hover:to-green-800 transition flex items-center gap-2",children:["Recipe Complete!",(0,s.jsx)(ex.Z,{className:"w-5 h-5"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,s.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:"All Steps"}),(0,s.jsx)("div",{className:"space-y-2",children:t.instructions.map((e,a)=>(0,s.jsx)("div",{className:"p-3 rounded-lg transition ".concat(a===d?"bg-purple-600 text-white":a<d?"bg-green-100 text-green-800":"bg-white text-gray-700 border border-gray-200"),children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsxs)("span",{className:"font-bold",children:[a+1,"."]}),(0,s.jsx)("span",{children:e})]})},a))})]})]})}):(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 z-40 overflow-y-auto",children:(0,s.jsx)("div",{className:"min-h-screen p-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl shadow-2xl",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white p-6 rounded-t-2xl",children:[(0,s.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("button",{onClick:i,className:"mb-4 flex items-center gap-2 text-white hover:text-gray-200 transition",children:[(0,s.jsx)(ev.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Back to Meal Plan"})]}),(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:t.name}),t.description&&(0,s.jsx)("p",{className:"text-purple-100",children:t.description})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[(0,s.jsxs)("div",{className:"bg-white bg-opacity-20 rounded-lg p-3",children:[(0,s.jsx)(eN.Z,{className:"w-5 h-5 mb-1"}),(0,s.jsx)("div",{className:"text-xs text-purple-100",children:"Prep Time"}),(0,s.jsxs)("div",{className:"text-lg font-bold",children:[t.prepTime," min"]})]}),(0,s.jsxs)("div",{className:"bg-white bg-opacity-20 rounded-lg p-3",children:[(0,s.jsx)(ew.Z,{className:"w-5 h-5 mb-1"}),(0,s.jsx)("div",{className:"text-xs text-purple-100",children:"Cook Time"}),(0,s.jsxs)("div",{className:"text-lg font-bold",children:[t.cookTime," min"]})]}),(0,s.jsxs)("div",{className:"bg-white bg-opacity-20 rounded-lg p-3",children:[(0,s.jsx)(eC.Z,{className:"w-5 h-5 mb-1"}),(0,s.jsx)("div",{className:"text-xs text-purple-100",children:"Servings"}),(0,s.jsx)("div",{className:"text-lg font-bold",children:t.servings})]}),(0,s.jsxs)("div",{className:"bg-white bg-opacity-20 rounded-lg p-3",children:[(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat((e=>{switch(e){case"easy":return"bg-green-100 text-green-700";case"medium":return"bg-yellow-100 text-yellow-700";case"hard":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}})(t.difficulty)),children:t.difficulty}),(0,s.jsx)("div",{className:"text-xs text-purple-100 mt-1",children:"Difficulty"})]})]})]}),(0,s.jsxs)("div",{className:"p-6",children:[u&&(0,s.jsx)("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(eS.Z,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-red-900 mb-1",children:"⚠️ Contains Your Allergens!"}),(0,s.jsxs)("p",{className:"text-red-700 text-sm",children:["This recipe contains: ",t.allergens.contains.join(", ")]})]})]})}),t.dietaryTags&&t.dietaryTags.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:t.dietaryTags.map((e,a)=>(0,s.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium",children:e},a))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,s.jsx)(eP.Z,{className:"w-5 h-5 text-purple-600"}),"Ingredients"]}),(0,s.jsx)("ul",{className:"space-y-2",children:t.ingredients.map((e,a)=>(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-purple-600 mt-1",children:"•"}),(0,s.jsxs)("span",{className:e.optional?"text-gray-500 italic":"",children:[e.quantity," ",e.unit," ",e.name,e.optional&&(0,s.jsx)("span",{className:"text-xs text-gray-400 ml-1",children:"(optional)"})]})]},a))})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,s.jsx)(ek.Z,{className:"w-5 h-5 text-purple-600"}),"Nutrition (per serving)"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Net Carbs"}),(0,s.jsxs)("span",{className:"font-bold text-purple-600",children:[t.nutrition.netCarbs,"g"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Total Carbs"}),(0,s.jsxs)("span",{className:"font-bold text-purple-600",children:[t.nutrition.totalCarbs,"g"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Protein"}),(0,s.jsxs)("span",{className:"font-bold text-purple-600",children:[t.nutrition.protein,"g"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Calories"}),(0,s.jsx)("span",{className:"font-bold text-purple-600",children:t.nutrition.calories})]}),t.nutrition.glycemicIndex&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"GI"}),(0,s.jsx)("span",{className:"font-bold text-purple-600",children:t.nutrition.glycemicIndex})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"GL"}),(0,s.jsx)("span",{className:"font-bold text-purple-600",children:t.nutrition.glycemicLoad})]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,s.jsx)(eD.Z,{className:"w-5 h-5 text-purple-600"}),"Instructions (",t.instructions.length," steps)"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[t.instructions.slice(0,3).map((e,a)=>(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center flex-shrink-0 font-bold",children:a+1}),(0,s.jsx)("p",{className:"text-gray-700 pt-1",children:e})]},a)),t.instructions.length>3&&(0,s.jsxs)("p",{className:"text-sm text-gray-500 italic",children:["+ ",t.instructions.length-3," more steps..."]})]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("button",{onClick:m,className:"flex-1 bg-gradient-to-r from-purple-600 to-purple-800 hover:from-purple-700 hover:to-purple-900 text-white py-4 rounded-xl font-semibold transition flex items-center justify-center gap-2",children:[(0,s.jsx)(eA.Z,{className:"w-5 h-5"}),"Start Cooking Mode"]}),l&&(0,s.jsxs)("button",{onClick:()=>l(t),className:"bg-green-600 hover:bg-green-700 text-white py-4 px-6 rounded-xl font-semibold transition flex items-center gap-2",children:[(0,s.jsx)(ep.Z,{className:"w-5 h-5"}),"Add to List"]})]})]})]})})})}function eE(){let{t:e}=(0,w.$G)("meals"),[a,t]=(0,r.useState)([]),[i,l]=(0,r.useState)(!0),[n,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)(""),[u,g]=(0,r.useState)(200),[x,b]=(0,r.useState)([]),[f,j]=(0,r.useState)(null),v=c.currentUser;(0,r.useEffect)(()=>{N()},[]);let N=async()=>{if(!v){m(e("errors.loginRequired")),l(!1);return}l(!0),m("");try{let e=await p.getProfile(v.uid);e.healthProfiles&&e.healthProfiles.length>0&&(b(e.healthProfiles[0].allergies||[]),g(e.healthProfiles[0].dailyCarbLimit||200));let a=await h.getMealPlan(v.uid);t(a.mealPlan)}catch(a){console.error("Failed to load meal plan:",a),m(a.message||e("errors.loadFailed"))}finally{l(!1)}},C=async a=>{try{let e=await h.getById(a);j(e)}catch(a){console.error("Failed to load recipe details:",a),alert(e("errors.recipeLoadFailed"))}},S=async a=>{if(!v){alert(e("errors.loginRequiredAddToList"));return}try{let t;let s=await h.generateShoppingList([a._id]),r=await y.getUserLists(v.uid);for(let a of(t=0===r.length?await y.create(v.uid,e("shopping.newListName")+" "+new Date().toLocaleDateString(),e("shopping.newListDescription")):r[0],s.shoppingList))await y.addItem(t._id,{name:a.name,quantity:a.quantity,unit:a.unit||"unit"});alert(e("shopping.itemsAddedSuccess",{count:s.totalItems})),j(null)}catch(a){alert(e("shopping.itemsAddedError",{message:a.message})),console.error(a)}},P=async()=>{if(!v){alert(e("shopping.loginRequiredGenerate"));return}o(!0);try{let t;let s=[];if(a.forEach(e=>{var a,t,r,i;(null===(a=e.meals.breakfast)||void 0===a?void 0:a._id)&&s.push(e.meals.breakfast._id),(null===(t=e.meals.lunch)||void 0===t?void 0:t._id)&&s.push(e.meals.lunch._id),(null===(r=e.meals.dinner)||void 0===r?void 0:r._id)&&s.push(e.meals.dinner._id),(null===(i=e.meals.snack)||void 0===i?void 0:i._id)&&s.push(e.meals.snack._id)}),0===s.length){alert(e("errors.noRecipesFound"));return}let r=await h.generateShoppingList(s),i=await y.getUserLists(v.uid);for(let a of(t=0===i.length?await y.create(v.uid,e("shopping.weeklyMealPlanName")+" "+new Date().toLocaleDateString(),e("shopping.weeklyMealPlanDescription")):i[0],r.shoppingList))await y.addItem(t._id,{name:a.name,quantity:a.quantity,unit:a.unit||"unit"});alert(e("shopping.itemsAddedSuccess",{count:r.totalItems}))}catch(a){alert(e("shopping.generateError",{message:a.message})),console.error(a)}finally{o(!1)}},k=e=>{switch(e){case"breakfast":return"\uD83C\uDF73";case"lunch":return"\uD83E\uDD57";case"dinner":return"\uD83C\uDF7D️";case"snack":return"\uD83C\uDF4E";default:return"\uD83C\uDF74"}},D=a=>({breakfast:e("mealPlan.mealTypes.breakfast"),lunch:e("mealPlan.mealTypes.lunch"),dinner:e("mealPlan.mealTypes.dinner"),snack:e("mealPlan.mealTypes.snack")})[a]||a.charAt(0).toUpperCase()+a.slice(1);return i?(0,s.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(ed.Z,{className:"w-8 h-8 animate-spin text-purple-600 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-600",children:e("loading")})]})}):d?(0,s.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(en.Z,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-red-600 font-semibold mb-2",children:e("errors.loadTitle")}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:d}),(0,s.jsx)("button",{onClick:N,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition",children:e("common:buttons.retry",{defaultValue:"Try Again"})})]})}):(0,s.jsxs)(s.Fragment,{children:[f&&(0,s.jsx)(eL,{recipe:f,onClose:()=>j(null),onGenerateShoppingList:S}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold mb-2",children:e("title")}),(0,s.jsx)("p",{className:"text-gray-600",children:e("subtitle")})]}),(0,s.jsxs)("button",{onClick:N,className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition flex items-center gap-2",children:[(0,s.jsx)(ej.Z,{className:"w-4 h-4"}),e("refresh")]})]}),a.length>0&&a[0].dailyNutrition&&(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white p-6 rounded-2xl mb-8 shadow-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm opacity-90 mb-1",children:e("mealPlan.carbBudget")}),(0,s.jsxs)("div",{className:"text-3xl font-bold",children:[u,"g"]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-sm opacity-90 mb-1",children:e("mealPlan.avgPerMeal")}),(0,s.jsxs)("div",{className:"text-3xl font-bold",children:[Math.round(u/3),"g"]})]})]})}),(0,s.jsx)("div",{className:"space-y-8",children:a.map((a,t)=>{var r,i;return(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-700 text-white p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold",children:a.dayOfWeek}),(0,s.jsx)("p",{className:"text-sm opacity-90",children:new Date(a.date).toLocaleDateString()})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-sm opacity-90",children:e("mealPlan.totalCarbs")}),(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[(null===(r=a.dailyNutrition)||void 0===r?void 0:r.totalCarbs)||0,"g"]}),(0,s.jsx)("div",{className:"text-xs opacity-75",children:e("mealPlan.percentOfLimit",{percent:(null===(i=a.dailyNutrition)||void 0===i?void 0:i.percentOfLimit)||0})})]})]})}),(0,s.jsx)("div",{className:"p-4 space-y-3",children:["breakfast","lunch","dinner","snack"].map(t=>{var r,i,l,n;let o=a.meals[t];return o?(0,s.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 hover:bg-gray-100 transition cursor-pointer",onClick:()=>o._id&&C(o._id),children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:k(t)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-500 font-medium",children:D(t)}),(0,s.jsx)("div",{className:"text-lg font-bold text-gray-900",children:o.name})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:null===(r=o.dietaryTags)||void 0===r?void 0:r.slice(0,3).map((e,a)=>(0,s.jsx)("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full font-medium",children:e},a))}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-600",children:[(0,s.jsxs)("span",{children:["⏱️ ",o.prepTime+o.cookTime," ",e("recipes.details.minutes",{defaultValue:"minutes"})]}),(0,s.jsxs)("span",{children:["\uD83D\uDC68‍\uD83C\uDF73 ",o.difficulty]}),(0,s.jsxs)("span",{children:["\uD83C\uDF7D️ ",e("mealPlan.servings",{count:o.servings})]})]})]}),(0,s.jsxs)("div",{className:"text-right ml-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-purple-600",children:e("recipes.details.carbs",{defaultValue:"Carbs"})}),(0,s.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:[(null===(i=o.nutrition)||void 0===i?void 0:i.netCarbs)||0,"g"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[(null===(l=o.nutrition)||void 0===l?void 0:l.calories)||0," ",e("recipes.details.calories",{defaultValue:"cal"})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[(null===(n=o.nutrition)||void 0===n?void 0:n.protein)||0,"g ",e("recipes.details.protein",{defaultValue:"protein"})]})]})]})},t):null})})]},t)})}),(0,s.jsx)("button",{onClick:P,disabled:n||0===a.length,className:"mt-8 w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 disabled:from-gray-400 disabled:to-gray-500 text-white py-4 rounded-xl flex items-center justify-center gap-2 transition font-semibold text-lg shadow-lg",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ed.Z,{className:"w-6 h-6 animate-spin"}),e("shopping.generating")]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ep.Z,{className:"w-6 h-6"}),e("shopping.generateList")]})}),(0,s.jsx)("div",{className:"mt-6 bg-blue-50 border-2 border-blue-200 rounded-xl p-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(ex.Z,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-blue-900 mb-2",children:e("personalizedPlan.title")}),(0,s.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,s.jsxs)("li",{children:["✓ ",e("personalizedPlan.allergensFiltered",{allergens:x.join(", ")||e("personalizedPlan.none")})]}),(0,s.jsxs)("li",{children:["✓ ",e("personalizedPlan.carbBudget",{budget:u})]}),(0,s.jsxs)("li",{children:["✓ ",e("personalizedPlan.daysPlanned",{days:a.length})]}),(0,s.jsxs)("li",{children:["✓ ",e("personalizedPlan.smartRecipes")]}),(0,s.jsxs)("li",{children:["✓ ",e("personalizedPlan.autoGenerate")]})]})]})]})})]})]})}var eT=t(5330),eI=t(5265),eF=t(8779),eR=t(6991),eM=t(269);let eG=["Type 1","Type 2","Prediabetes","Gestational","No Diabetes"],eZ=[{emoji:"\uD83E\uDD5C",label:"Peanuts"},{emoji:"\uD83C\uDF30",label:"Tree Nuts"},{emoji:"\uD83E\uDD5B",label:"Dairy"},{emoji:"\uD83E\uDD5A",label:"Eggs"},{emoji:"\uD83D\uDC1F",label:"Fish"},{emoji:"\uD83E\uDD90",label:"Shellfish"},{emoji:"\uD83C\uDF3E",label:"Wheat/Gluten"},{emoji:"\uD83E\uDED8",label:"Soy"},{emoji:"\uD83C\uDF3D",label:"Corn"},{emoji:"\uD83C\uDF45",label:"Nightshades"}];function eB(e){let{user:a}=e,{t}=(0,w.$G)("profile"),[i,l]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)(""),[g,x]=(0,r.useState)(""),[h,b]=(0,r.useState)(""),[y,f]=(0,r.useState)(""),[j,v]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),[P,k]=(0,r.useState)("Type 1"),[D,A]=(0,r.useState)(80),[L,E]=(0,r.useState)(130),[T,I]=(0,r.useState)(200),[F,R]=(0,r.useState)(["Peanuts","Dairy"]),[M,G]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let e=c.currentUser;if(!e)return;let t=await p.getProfile(e.uid);if(console.log("[PROFILE] Loaded user data:",t),(null==t?void 0:t.name)?b(t.name):(null==t?void 0:t.displayName)?b(t.displayName):(null==a?void 0:a.name)?b(a.name):(null==a?void 0:a.displayName)&&b(a.displayName),(null==t?void 0:t.age)!==void 0&&(null==t?void 0:t.age)!==null?f(t.age):(null==a?void 0:a.age)!==void 0&&(null==a?void 0:a.age)!==null&&f(a.age),(null==t?void 0:t.height)!==void 0&&(null==t?void 0:t.height)!==null?v(t.height):(null==a?void 0:a.height)!==void 0&&(null==a?void 0:a.height)!==null&&v(a.height),(null==t?void 0:t.weight)!==void 0&&(null==t?void 0:t.weight)!==null?S(t.weight):(null==a?void 0:a.weight)!==void 0&&(null==a?void 0:a.weight)!==null&&S(a.weight),(null==t?void 0:t.healthProfiles)&&t.healthProfiles.length>0){let e=t.healthProfiles[0];e.diabetesType&&k(e.diabetesType),void 0!==e.targetGlucoseMin&&A(e.targetGlucoseMin),void 0!==e.targetGlucoseMax&&E(e.targetGlucoseMax),void 0!==e.dailyCarbLimit&&I(e.dailyCarbLimit),e.allergies&&Array.isArray(e.allergies)&&R(e.allergies),void 0!==e.usesInsulin&&G(e.usesInsulin)}else if((null==a?void 0:a.healthProfiles)&&a.healthProfiles.length>0){let e=a.healthProfiles[0];e.diabetesType&&k(e.diabetesType),void 0!==e.targetGlucoseMin&&A(e.targetGlucoseMin),void 0!==e.targetGlucoseMax&&E(e.targetGlucoseMax),void 0!==e.dailyCarbLimit&&I(e.dailyCarbLimit),e.allergies&&Array.isArray(e.allergies)&&R(e.allergies),void 0!==e.usesInsulin&&G(e.usesInsulin)}}catch(e){console.error("[PROFILE] Error loading user data:",e)}})()},[a]);let Z=async()=>{await (0,n.w7)(c)},B=e=>{R(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},U=async()=>{let e=c.currentUser;if(!e){console.error("[PROFILE] No Firebase user!"),u(t("errors.noUser"));return}d(!0),u(""),x("");try{let a={displayName:h,age:"number"==typeof y?y:void 0,height:"number"==typeof j?j:void 0,weight:"number"==typeof C?C:void 0,diabetesType:P,targetGlucoseMin:D,targetGlucoseMax:L,dailyCarbLimit:T,allergies:F,usesInsulin:M};console.log("[PROFILE] Sending data:",a);let s=await p.saveHealthProfile(e.uid,a);console.log("[PROFILE] Save successful! Response:",s),x(t("profile.saved")),l(!1),setTimeout(()=>x(""),3e3)}catch(e){console.error("[PROFILE] Save failed with error:",e),console.error("[PROFILE] Error details:",e.message,e.stack),u(t("profile.error"))}finally{d(!1),console.log("[PROFILE] Save process completed")}};return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white p-8 rounded-3xl mb-6 text-center shadow-lg",children:(0,s.jsx)("h2",{className:"text-3xl font-bold",children:h||(null==a?void 0:a.name)||(null==a?void 0:a.displayName)||t("profileTitle",{defaultValue:"User"})})}),g&&(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 text-green-700 p-4 rounded-xl mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"✓"}),(0,s.jsx)("span",{children:g})]}),m&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-xl mb-4 flex items-center gap-2",children:[(0,s.jsx)(eS.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:m})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h3",{className:"font-bold text-lg flex items-center gap-2",children:[(0,s.jsx)(eT.Z,{className:"w-5 h-5 text-purple-600"}),t("personalInfo.title")]}),!i&&(0,s.jsxs)("button",{onClick:()=>l(!0),className:"flex items-center gap-2 text-purple-600 hover:text-purple-700 font-semibold text-sm",children:[(0,s.jsx)(eI.Z,{className:"w-4 h-4"}),t("profile.edit")]})]}),i?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t("personalInfo.displayName")}),(0,s.jsx)("input",{type:"text",value:h,onChange:e=>b(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none",placeholder:t("personalInfo.displayNamePlaceholder")})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t("personalInfo.age")}),(0,s.jsx)("input",{type:"number",value:y,onChange:e=>f(e.target.value?Number(e.target.value):""),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none",placeholder:t("personalInfo.agePlaceholder"),min:"1",max:"120"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t("personalInfo.height")}),(0,s.jsx)("input",{type:"number",value:j,onChange:e=>v(e.target.value?Number(e.target.value):""),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none",placeholder:t("personalInfo.heightPlaceholder"),min:"50",max:"250"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t("personalInfo.weight")}),(0,s.jsx)("input",{type:"number",value:C,onChange:e=>S(e.target.value?Number(e.target.value):""),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none",placeholder:t("personalInfo.weightPlaceholder"),min:"20",max:"300"})]})]})]}):(0,s.jsxs)("div",{className:"space-y-3",children:[h&&(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:t("personalInfo.name")}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:h})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[y&&(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:t("personalInfo.age")}),(0,s.jsxs)("p",{className:"font-semibold text-gray-900",children:[y," ",t("personalInfo.ageUnit")]})]}),j&&(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:t("personalInfo.height").replace(" (cm)","")}),(0,s.jsxs)("p",{className:"font-semibold text-gray-900",children:[j," ",t("personalInfo.heightUnit")]})]}),C&&(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:t("personalInfo.weight").replace(" (kg)","")}),(0,s.jsxs)("p",{className:"font-semibold text-gray-900",children:[C," ",t("personalInfo.weightUnit")]})]})]}),!h&&!y&&!j&&!C&&(0,s.jsx)("p",{className:"text-gray-600 text-sm italic",children:t("personalInfo.noInfo")})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h3",{className:"font-bold text-lg flex items-center gap-2",children:[(0,s.jsx)(eF.Z,{className:"w-5 h-5 text-red-600"}),t("healthProfile.title")]}),!i&&(0,s.jsxs)("button",{onClick:()=>l(!0),className:"flex items-center gap-2 text-purple-600 hover:text-purple-700 font-semibold text-sm",children:[(0,s.jsx)(eI.Z,{className:"w-4 h-4"}),t("profile.edit")]})]}),i?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t("healthProfile.diabetesType")}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:eG.map(e=>(0,s.jsx)("button",{onClick:()=>k(e),className:"p-3 rounded-xl font-semibold transition ".concat(P===e?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t("healthProfile.types.".concat(e))},e))})]}),"No Diabetes"!==P&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t("healthProfile.targetGlucose")}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{type:"number",value:D,onChange:e=>A(Number(e.target.value)),className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none",placeholder:t("healthProfile.min")}),(0,s.jsx)("span",{className:"text-gray-600",children:t("healthProfile.to")}),(0,s.jsx)("input",{type:"number",value:L,onChange:e=>E(Number(e.target.value)),className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none",placeholder:t("healthProfile.max")})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t("healthProfile.dailyCarbLimit")}),(0,s.jsx)("input",{type:"number",value:T,onChange:e=>I(Number(e.target.value)),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none",placeholder:t("healthProfile.dailyCarbPlaceholder")})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{type:"checkbox",id:"usesInsulin",checked:M,onChange:e=>G(e.target.checked),className:"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-600"}),(0,s.jsx)("label",{htmlFor:"usesInsulin",className:"text-sm font-semibold text-gray-700",children:t("healthProfile.usesInsulin")})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,s.jsxs)("button",{onClick:U,disabled:o,className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-xl font-semibold flex items-center justify-center gap-2 transition disabled:opacity-50",children:[(0,s.jsx)(eR.Z,{className:"w-4 h-4"}),o?t("buttons.saving"):t("buttons.save")]}),(0,s.jsxs)("button",{onClick:()=>{l(!1),u("")},className:"px-6 bg-gray-200 hover:bg-gray-300 text-gray-900 py-3 rounded-xl font-semibold flex items-center justify-center gap-2 transition",children:[(0,s.jsx)(eM.Z,{className:"w-4 h-4"}),t("buttons.cancel")]})]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:t("healthProfile.diabetesType")}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:t("healthProfile.types.".concat(P))})]}),"No Diabetes"!==P&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:t("healthProfile.targetGlucoseDisplay")}),(0,s.jsxs)("p",{className:"font-semibold text-gray-900",children:[D,"-",L," mg/dL"]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:t("healthProfile.dailyCarbDisplay")}),(0,s.jsxs)("p",{className:"font-semibold text-gray-900",children:[T,"g"]})]}),M&&(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:t("healthProfile.insulinUse")}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:t("healthProfile.yes")})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg mb-4",children:[(0,s.jsxs)("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[(0,s.jsx)(eS.Z,{className:"w-5 h-5 text-orange-600"}),t("allergies.title")]}),i?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:t("allergies.selectAll")}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:eZ.map(e=>{let{emoji:a,label:t}=e;return(0,s.jsxs)("button",{onClick:()=>B(t),className:"p-3 rounded-xl font-semibold transition text-left ".concat(F.includes(t)?"bg-red-100 text-red-700 border-2 border-red-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,s.jsx)("span",{className:"mr-2",children:a}),t]},t)})})]}):(0,s.jsx)("div",{children:F.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:F.map(e=>{let a=eZ.find(a=>a.label===e);return(0,s.jsxs)("span",{className:"bg-red-100 text-red-700 px-4 py-2 rounded-full font-medium text-sm",children:[null==a?void 0:a.emoji," ",e]},e)})}):(0,s.jsx)("p",{className:"text-gray-600 text-sm italic",children:t("allergies.noneSpecified")})})]}),!i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,s.jsxs)("button",{className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-900 p-4 rounded-xl transition flex items-center justify-between font-semibold",children:[(0,s.jsx)("span",{children:t("settings.notifications")}),(0,s.jsx)("span",{className:"text-gray-400",children:"›"})]}),(0,s.jsxs)("button",{className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-900 p-4 rounded-xl transition flex items-center justify-between font-semibold",children:[(0,s.jsx)("span",{children:t("settings.privacy")}),(0,s.jsx)("span",{className:"text-gray-400",children:"›"})]})]}),(0,s.jsxs)("button",{onClick:Z,className:"w-full bg-red-600 hover:bg-red-700 text-white py-4 rounded-xl transition font-semibold flex items-center justify-center gap-2 text-lg shadow-lg",children:[(0,s.jsx)(N.Z,{className:"w-5 h-5"}),t("settings.logout")]})]})]})}var eU=t(7124);let eO=["Peanuts","Tree Nuts","Milk","Eggs","Soy","Wheat","Fish","Shellfish"],eq=["Dairy","Produce","Meat & Seafood","Bakery","Snacks","Beverages","Pantry","Frozen"];function ez(){let{t:e}=(0,w.$G)("discover"),[a,t]=(0,r.useState)(""),[i,l]=(0,r.useState)([]),[n,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(!1),[h,b]=(0,r.useState)([]),[y,f]=(0,r.useState)(""),[j,v]=(0,r.useState)(""),[N,C]=(0,r.useState)([]),[S,P]=(0,r.useState)([]),[k,D]=(0,r.useState)(!0),A=c.currentUser;(0,r.useEffect)(()=>{L()},[]);let L=async()=>{if(A)try{let e=await p.getProfile(A.uid);if(e.healthProfiles&&e.healthProfiles.length>0){let a=e.healthProfiles[0].allergies||[];P(a),k&&a.length>0&&b(a)}}catch(e){console.log("Could not load user allergies")}},E=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{l([]),m(""),o(!0),await new Promise(e=>setTimeout(e,50));let t={};e&&(t.limit=50),y&&(t.category=y),h.length>0&&(t.allergen=h[0]),j&&(t.maxCarbs=parseInt(j));let s=e?"":a.trim();if(!e&&!s&&!y&&0===h.length&&!j){m("Please enter a search term or select filters to browse products"),o(!1);return}console.log("Searching with:",{query:s,filters:t,browseAll:e});let r=await g.search(s,t);console.log("Results received:",(null==r?void 0:r.length)||0);let i=Array.isArray(r)?r:[];l(i),0===i.length&&e&&m("No products available in the database yet.")}catch(e){m("Failed to search products. "+(e.message||"Please try again.")),console.error("Search error:",e),l([])}finally{o(!1)}},T=e=>{b(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},I=e=>{C(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},F=e=>{var a;let t=(null===(a=e.allergens)||void 0===a?void 0:a.contains)||[];if(0===t.length)return{safe:!0,allergens:[],allAllergens:[]};let s=t.filter(e=>S.some(a=>e.toLowerCase()===a.toLowerCase()));return{safe:0===s.length,allergens:s,allAllergens:t}},R=e=>{var a;let t=F(e);return t.safe&&0===((null===(a=t.allAllergens)||void 0===a?void 0:a.length)||0)?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 text-green-600 font-semibold text-sm",children:[(0,s.jsx)(ex.Z,{className:"w-4 h-4"}),"Safe"]}):t.safe?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 text-yellow-600 font-semibold text-sm",children:[(0,s.jsx)(en.Z,{className:"w-4 h-4"}),"Check Labels"]}):(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 text-red-600 font-semibold text-sm",children:[(0,s.jsx)(en.Z,{className:"w-4 h-4"}),"Danger!"]})};return(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(ec.Z,{className:"w-8 h-8 text-purple-600"}),(0,s.jsx)("h2",{className:"text-3xl font-bold",children:e("title")})]}),d&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-start gap-3",children:[(0,s.jsx)(en.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-red-700",children:e("errors.search",{defaultValue:d})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,s.jsx)("input",{type:"text",value:a,onChange:e=>t(e.target.value),onKeyPress:e=>"Enter"===e.key&&E(),placeholder:e("search.placeholder"),className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none"}),(0,s.jsx)("button",{onClick:()=>E(),disabled:n,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2 transition disabled:opacity-50",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ed.Z,{className:"w-5 h-5 animate-spin"}),e("search.searching")]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ec.Z,{className:"w-5 h-5"}),e("search.button")]})}),(0,s.jsxs)("button",{onClick:()=>x(!u),className:"border-2 border-gray-300 hover:border-purple-600 text-gray-700 hover:text-purple-600 px-4 py-3 rounded-lg font-semibold flex items-center gap-2 transition",children:[(0,s.jsx)(eU.Z,{className:"w-5 h-5"}),e("filters.title")]}),(a||y||h.length>0||j||i.length>0)&&(0,s.jsx)("button",{onClick:()=>{t(""),f(""),b([]),v(""),l([]),m("")},className:"border-2 border-red-300 hover:border-red-600 text-red-600 hover:bg-red-50 px-4 py-3 rounded-lg font-semibold transition",children:e("filters.clear")})]}),u&&(0,s.jsxs)("div",{className:"border-t-2 border-gray-200 pt-4 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:eq.map(e=>(0,s.jsx)("button",{onClick:()=>f(e===y?"":e),className:"px-3 py-2 rounded-lg font-medium transition text-sm ".concat(y===e?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Avoid Allergens"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:eO.map(e=>(0,s.jsxs)("button",{onClick:()=>T(e),className:"px-3 py-2 rounded-lg font-medium transition text-sm ".concat(h.includes(e)?"bg-red-100 text-red-700 border-2 border-red-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[h.includes(e)?"✓ ":"",e]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Max Carbs (g)"}),(0,s.jsx)("input",{type:"number",value:j,onChange:e=>v(e.target.value),placeholder:"Leave empty for no limit",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none"})]})]})]}),0===i.length&&!n&&a&&(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[(0,s.jsx)(ec.Z,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,s.jsx)("p",{className:"text-gray-500 text-lg",children:"No products found. Try a different search!"})]}),n&&(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(ed.Z,{className:"w-8 h-8 animate-spin text-purple-600 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Searching products..."})]})}),i.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-gray-600 mb-4",children:["Found ",i.length," products"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(e=>{var a,t,r;let i=F(e);return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition p-4 ".concat(i.safe?"":"border-2 border-red-500"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-gray-900",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.brand})]}),(0,s.jsx)("button",{onClick:()=>I(e._id),className:"ml-2 transition ".concat(N.includes(e._id)?"text-red-600":"text-gray-300 hover:text-red-400"),children:(0,s.jsx)(eF.Z,{className:"w-6 h-6",fill:N.includes(e._id)?"currentColor":"none"})})]}),(0,s.jsx)("div",{className:"mb-3",children:R(e)}),!i.safe&&((null===(a=i.allergens)||void 0===a?void 0:a.length)||0)>0&&(0,s.jsx)("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-3 mb-3",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(en.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-red-700 text-sm",children:"⚠️ Contains Your Allergens!"}),(0,s.jsxs)("p",{className:"text-red-600 text-xs mt-1",children:["This product contains: ",(null===(t=i.allergens)||void 0===t?void 0:t.join(", "))||"Unknown"]})]})]})}),e.nutrition&&(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 mb-3 grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Net Carbs"}),(0,s.jsxs)("p",{className:"font-bold text-purple-600",children:[e.nutrition.netCarbs,"g"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Sugar"}),(0,s.jsxs)("p",{className:"font-bold text-purple-600",children:[e.nutrition.sugar,"g"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Protein"}),(0,s.jsxs)("p",{className:"font-bold text-purple-600",children:[e.nutrition.protein,"g"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Calories"}),(0,s.jsx)("p",{className:"font-bold text-purple-600",children:e.nutrition.calories})]})]}),(null===(r=e.allergens)||void 0===r?void 0:r.contains)&&e.allergens.contains.length>0&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Contains:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:e.allergens.contains.map(e=>{var a;let t=(null===(a=i.allergens)||void 0===a?void 0:a.includes(e))||!1;return(0,s.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(t?"bg-red-500 text-white":"bg-gray-100 text-gray-700"),children:[e,t&&" ⚠️"]},e)})})]}),e.diabetesInfo&&(0,s.jsx)("div",{className:"bg-blue-50 rounded-lg p-2 text-sm",children:(0,s.jsxs)("p",{className:"text-gray-600",children:["GI: ",(0,s.jsx)("span",{className:"font-bold text-blue-600",children:e.diabetesInfo.glycemicIndex})," | ","GL: ",(0,s.jsx)("span",{className:"font-bold text-blue-600",children:e.diabetesInfo.glycemicLoad})]})}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-3",children:e.category})]},e._id)})})]}),!a&&!n&&0===i.length&&(0,s.jsxs)("div",{className:"bg-purple-50 rounded-lg p-12 text-center border-2 border-purple-200",children:[(0,s.jsx)(ec.Z,{className:"w-16 h-16 mx-auto mb-4 text-purple-300"}),(0,s.jsx)("p",{className:"text-gray-600 text-lg mb-4",children:"Start searching for products you love!"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mb-6",children:"Search by product name, brand, or ingredient. Use filters to match your dietary needs."}),(0,s.jsx)("button",{onClick:()=>E(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold transition",children:"Browse All Products (50+)"})]})]})}var e_=t(6548),eH=t(5409),eV=t(1095),eJ=t(9790),eW=t(2439),eY=t(3727),eK=t(698);function e$(e){let{onNavigateToAnalytics:a}=e,{t}=(0,w.$G)("dashboard"),[i,l]=(0,r.useState)(null),[n,o]=(0,r.useState)([]),[d,m]=(0,r.useState)(!0),[u,p]=(0,r.useState)(7),g=c.currentUser;(0,r.useEffect)(()=>{x()},[u]);let x=async()=>{if(g)try{m(!0);let[e,a]=await Promise.all([b.getDashboard(g.uid,u),b.getNutritionChart(g.uid,u)]);l(e),o(a)}catch(e){console.error("Failed to load analytics:",e)}finally{m(!1)}};if(d)return(0,s.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(ed.Z,{className:"w-8 h-8 animate-spin text-purple-600 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-600",children:t("loading")})]})});if(!i)return(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("p",{className:"text-gray-600",children:t("noData")}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:t("noDataSubtitle")})]});let{summary:h,nutrition:y,shoppingLists:f,insights:j}=i;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold mb-1",children:t("title")}),(0,s.jsx)("p",{className:"text-gray-600",children:t("subtitle")})]}),(0,s.jsx)("div",{className:"flex gap-2",children:[7,14,30].map(e=>(0,s.jsx)("button",{onClick:()=>p(e),className:"px-4 py-2 rounded-lg font-medium transition ".concat(u===e?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t("period.".concat(e,"d"))},e))})]}),j&&j.length>0&&(0,s.jsx)("div",{className:"space-y-3",children:j.map((e,a)=>{let r=e.translationKey?t(e.translationKey,e.params||{}):e.message;return!e.translationKey&&"string"==typeof e.message&&(e.message.includes("Perfect safety score")?r=t("insights.perfectSafety",{count:h.totalItems}):e.message.includes("Great carb control")||e.message.includes("staying within your budget")?r=t("insights.greatCarbControl"):e.message.includes("Meal Planner")||e.message.includes("diabetes-friendly")?r=t("insights.tryMealPlanner"):e.message.includes("dangerous items detected")?r=t("insights.dangerousDetected",{count:h.dangerousItemsAvoided}):e.message.includes("day streak")&&(r=t("insights.streakAchievement",{days:h.currentStreak}))),(0,s.jsxs)("div",{className:"border-2 rounded-xl p-4 flex items-start gap-3 ".concat({success:"bg-green-50 border-green-200 text-green-800",warning:"bg-orange-50 border-orange-200 text-orange-800",achievement:"bg-purple-50 border-purple-200 text-purple-800",tip:"bg-blue-50 border-blue-200 text-blue-800"}[e.type]),children:[(0,s.jsx)("span",{className:"text-2xl",children:e.icon}),(0,s.jsx)("p",{className:"font-medium flex-1",children:r})]},a)})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-6 rounded-2xl shadow-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)(e_.Z,{className:"w-10 h-10 opacity-80"}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm opacity-90",children:t("stats.safetyScore")}),(0,s.jsxs)("p",{className:"text-5xl font-bold",children:[h.safetyScore,"%"]})]})]}),(0,s.jsxs)("div",{className:"text-sm opacity-90",children:[h.safeItems," ",t("stats.safeItems")," / ",h.totalItems," ",t("stats.totalItems")]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white p-6 rounded-2xl shadow-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)(eH.Z,{className:"w-10 h-10 opacity-80"}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm opacity-90",children:t("stats.safeStreak")}),(0,s.jsx)("p",{className:"text-5xl font-bold",children:h.currentStreak})]})]}),(0,s.jsx)("div",{className:"text-sm opacity-90",children:h.currentStreak>0?t("stats.streakDays",{days:h.currentStreak}):t("stats.streakStart")})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-6 rounded-2xl shadow-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)(eV.Z,{className:"w-10 h-10 opacity-80"}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm opacity-90",children:t("stats.carbControl")}),(0,s.jsxs)("p",{className:"text-5xl font-bold",children:[y.carbBudgetAdherence,"%"]})]})]}),(0,s.jsx)("div",{className:"text-sm opacity-90",children:t("stats.avgDaily",{carbs:y.avgDailyCarbs,limit:y.dailyCarbLimit})})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white p-6 rounded-2xl shadow-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)(en.Z,{className:"w-10 h-10 opacity-80"}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm opacity-90",children:t("stats.dangersAvoided")}),(0,s.jsx)("p",{className:"text-5xl font-bold",children:h.dangerousItemsAvoided})]})]}),(0,s.jsx)("div",{className:"text-sm opacity-90",children:t("stats.dangersFlagged")})]})]}),a&&(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 rounded-2xl shadow-xl p-6 text-white",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold mb-2 flex items-center gap-2",children:[(0,s.jsx)(eJ.Z,{className:"w-6 h-6"}),t("analytics.wantMore")]}),(0,s.jsx)("p",{className:"text-purple-100 text-sm",children:t("analytics.wantMoreDesc")})]}),(0,s.jsxs)("button",{onClick:a,className:"ml-4 bg-white text-purple-600 px-6 py-3 rounded-xl font-bold hover:bg-purple-50 transition-all transform hover:scale-105 shadow-lg flex items-center gap-2",children:[(0,s.jsx)(eW.Z,{className:"w-5 h-5"}),t("analytics.viewAnalytics")]})]})}),n.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold",children:t("nutrition.title")}),(0,s.jsx)(eJ.Z,{className:"w-6 h-6 text-purple-600"})]}),(0,s.jsx)("div",{className:"space-y-4",children:n.map((e,a)=>(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:e.dayName}),(0,s.jsx)("span",{className:"text-gray-500",children:e.date})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-xs text-gray-600 w-16",children:t("nutrition.carbs")}),(0,s.jsx)("div",{className:"flex-1 bg-gray-100 rounded-full h-6 relative overflow-hidden",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-full rounded-full flex items-center justify-end pr-2",style:{width:"".concat(Math.min(e.carbs/y.dailyCarbLimit*100,100),"%")},children:(0,s.jsxs)("span",{className:"text-xs font-bold text-white",children:[e.carbs,"g"]})})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-xs text-gray-600 w-16",children:t("nutrition.protein")}),(0,s.jsx)("div",{className:"flex-1 bg-gray-100 rounded-full h-6 relative overflow-hidden",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-full rounded-full flex items-center justify-end pr-2",style:{width:"".concat(Math.min(e.protein/100*100,100),"%")},children:(0,s.jsxs)("span",{className:"text-xs font-bold text-white",children:[e.protein,"g"]})})})]})]},a))}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-6 pt-4 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-purple-600 rounded-full"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:t("nutrition.carbsGoal",{limit:y.dailyCarbLimit})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-green-600 rounded-full"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:t("nutrition.proteinGoal")})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,s.jsx)(eF.Z,{className:"w-6 h-6 text-purple-600"})}),(0,s.jsx)("h3",{className:"font-bold text-lg",children:t("nutritionAverages.title")})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:t("nutritionAverages.dailyCarbs")}),(0,s.jsxs)("span",{className:"font-bold text-purple-600",children:[y.avgDailyCarbs,"g"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:t("nutritionAverages.dailyProtein")}),(0,s.jsxs)("span",{className:"font-bold text-green-600",children:[y.avgDailyProtein,"g"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:t("nutritionAverages.dailyCalories")}),(0,s.jsx)("span",{className:"font-bold text-orange-600",children:y.avgDailyCalories})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center pt-3 border-t",children:[(0,s.jsx)("span",{className:"text-gray-600",children:t("nutritionAverages.mealsTracked")}),(0,s.jsx)("span",{className:"font-bold",children:y.mealsTracked})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,s.jsx)(eY.Z,{className:"w-6 h-6 text-blue-600"})}),(0,s.jsx)("h3",{className:"font-bold text-lg",children:t("shopping.title")})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:t("shopping.totalLists")}),(0,s.jsx)("span",{className:"font-bold text-blue-600",children:f.totalLists})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:t("shopping.itemsAdded")}),(0,s.jsx)("span",{className:"font-bold text-gray-900",children:f.totalItems})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:t("shopping.completed")}),(0,s.jsx)("span",{className:"font-bold text-green-600",children:f.completedItems})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center pt-3 border-t",children:[(0,s.jsx)("span",{className:"text-gray-600",children:t("shopping.completionRate")}),(0,s.jsxs)("span",{className:"font-bold",children:[f.totalItems>0?Math.round(f.completedItems/f.totalItems*100):0,"%"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-yellow-100 rounded-xl flex items-center justify-center",children:(0,s.jsx)(eK.Z,{className:"w-6 h-6 text-yellow-600"})}),(0,s.jsx)("h3",{className:"font-bold text-lg",children:t("achievements.title")})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[100===h.safetyScore&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(ex.Z,{className:"w-5 h-5 text-green-600"}),(0,s.jsx)("span",{children:t("achievements.perfectSafety")})]}),h.currentStreak>=7&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(eH.Z,{className:"w-5 h-5 text-orange-600"}),(0,s.jsx)("span",{children:t("achievements.weekStreak")})]}),y.carbBudgetAdherence>=90&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(eV.Z,{className:"w-5 h-5 text-purple-600"}),(0,s.jsx)("span",{children:t("achievements.carbMaster")})]}),h.totalItems>=50&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(eW.Z,{className:"w-5 h-5 text-blue-600"}),(0,s.jsx)("span",{children:t("achievements.activeShopper")})]}),h.safetyScore<100&&h.currentStreak<7&&y.carbBudgetAdherence<90&&h.totalItems<50&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:t("achievements.keepGoing")})]})]})]})]})}var eQ=t(5015),eX=t(4105),e0=t(4737);function e2(){let{t:e}=(0,w.$G)("community"),[a,t]=(0,r.useState)([]),[i,l]=(0,r.useState)(!0),[n,o]=(0,r.useState)("all"),[d,m]=(0,r.useState)(1),[u,p]=(0,r.useState)(!0),[g,x]=(0,r.useState)(null),[h,b]=(0,r.useState)(""),[y,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)({type:"tip",title:"",content:"",tags:""}),C=c.currentUser;(0,r.useEffect)(()=>{S()},[n]);let S=async()=>{l(!0);try{let e=await f.getFeed(null==C?void 0:C.uid,1,20,n);t(e.posts),p(e.hasMore),m(1)}catch(e){console.error("Error loading feed:",e)}finally{l(!1)}},P=async()=>{try{let e=d+1,s=await f.getFeed(null==C?void 0:C.uid,e,20,n);t([...a,...s.posts]),p(s.hasMore),m(e)}catch(e){console.error("Error loading more posts:",e)}},k=async e=>{if(C)try{let s=await f.likePost(e,C.uid);t(a.map(a=>a._id===e?{...a,isLiked:s.liked,likeCount:s.likeCount}:a))}catch(e){console.error("Error liking post:",e)}},D=async e=>{if(C)try{let s=await f.bookmarkPost(e,C.uid);t(a.map(a=>a._id===e?{...a,isBookmarked:s.bookmarked,bookmarkCount:s.bookmarkCount}:a))}catch(e){console.error("Error bookmarking post:",e)}},A=async e=>{if(C&&h.trim())try{await f.addComment(e,C.uid,C.displayName||C.email||"Anonymous",h.trim()),b("");let s=await f.getPost(e,C.uid);t(a.map(a=>a._id===e?s.post:a))}catch(e){console.error("Error adding comment:",e)}},L=async()=>{if(!C||!v.title.trim()||!v.content.trim()){alert(e("errors.fillRequired"));return}try{let e=v.tags.split(",").map(e=>e.trim()).filter(e=>e);await f.createPost({userId:C.uid,userName:C.displayName||C.email||"Anonymous",type:v.type,title:v.title,content:v.content,tags:e,visibility:"public"}),j(!1),N({type:"tip",title:"",content:"",tags:""}),S()}catch(a){console.error("Error creating post:",a),alert(e("errors.createFailed"))}},E=e=>{switch(e){case"recipe":return"\uD83C\uDF73";case"tip":return"\uD83D\uDCA1";case"success_story":return"\uD83C\uDF89";case"meal_plan":return"\uD83D\uDCC5";case"shopping_list":return"\uD83D\uDED2";default:return"\uD83D\uDCDD"}},T=e=>{switch(e){case"recipe":return"bg-orange-100 text-orange-800";case"tip":return"bg-blue-100 text-blue-800";case"success_story":return"bg-green-100 text-green-800";case"meal_plan":return"bg-purple-100 text-purple-800";case"shopping_list":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},I=a=>e("postTypes.".concat(a),{defaultValue:a.replace("_"," ")});return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:e("title")}),(0,s.jsx)("div",{className:"flex gap-2 flex-wrap mb-4",children:["all","recipe","tip","success_story","following"].map(a=>(0,s.jsx)("button",{onClick:()=>o(a),className:"px-4 py-2 rounded-lg font-medium transition ".concat(n===a?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e("filters.".concat(a),{defaultValue:a.replace("_"," ").charAt(0).toUpperCase()+a.replace("_"," ").slice(1)})},a))}),(0,s.jsx)("button",{onClick:()=>j(!0),className:"w-full py-3 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-purple-900 transition",children:e("createPost.shareButton")})]}),y&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl max-w-lg w-full p-6 shadow-2xl",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:e("createPost.title")}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:e("createPost.type")}),(0,s.jsxs)("select",{value:v.type,onChange:e=>N({...v,type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[(0,s.jsx)("option",{value:"tip",children:e("postTypes.tip")}),(0,s.jsx)("option",{value:"recipe",children:e("postTypes.recipe")}),(0,s.jsx)("option",{value:"success_story",children:e("postTypes.success_story")}),(0,s.jsx)("option",{value:"meal_plan",children:e("postTypes.meal_plan")})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:e("createPost.titleLabel")}),(0,s.jsx)("input",{type:"text",value:v.title,onChange:e=>N({...v,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",placeholder:e("createPost.titlePlaceholder"),maxLength:200})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:e("createPost.contentLabel")}),(0,s.jsx)("textarea",{value:v.content,onChange:e=>N({...v,content:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 h-32",placeholder:e("createPost.contentPlaceholder"),maxLength:2e3})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:e("createPost.tagsLabel")}),(0,s.jsx)("input",{type:"text",value:v.tags,onChange:e=>N({...v,tags:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",placeholder:e("createPost.tagsPlaceholder")})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:L,className:"flex-1 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition",children:e("createPost.post")}),(0,s.jsx)("button",{onClick:()=>j(!1),className:"px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition",children:e("createPost.cancel")})]})]})]})}),i?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-purple-600 border-t-transparent"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:e("loading")})]}):0===a.length?(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-12 text-center",children:[(0,s.jsx)("p",{className:"text-gray-600 text-lg mb-4",children:e("empty.title")}),(0,s.jsx)("p",{className:"text-gray-500",children:e("empty.subtitle")})]}):(0,s.jsxs)(s.Fragment,{children:[a.map(a=>(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(eT.Z,{className:"w-6 h-6 text-purple-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-800",children:a.userName}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:new Date(a.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),(0,s.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(T(a.type)),children:[E(a.type)," ",I(a.type)]})]}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:a.title}),(0,s.jsx)("p",{className:"text-gray-700 mb-4 whitespace-pre-wrap",children:a.content}),a.tags.length>0&&(0,s.jsx)("div",{className:"flex gap-2 flex-wrap mb-4",children:a.tags.map((e,a)=>(0,s.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["#",e]},a))}),(0,s.jsxs)("div",{className:"flex items-center gap-4 pt-4 border-t border-gray-200",children:[(0,s.jsxs)("button",{onClick:()=>k(a._id),className:"flex items-center gap-2 transition ".concat(a.isLiked?"text-red-500":"text-gray-600 hover:text-red-500"),children:[(0,s.jsx)(eF.Z,{className:"w-5 h-5 ".concat(a.isLiked?"fill-current":"")}),(0,s.jsx)("span",{className:"text-sm font-medium",children:a.likeCount})]}),(0,s.jsxs)("button",{onClick:()=>x(g===a._id?null:a._id),className:"flex items-center gap-2 text-gray-600 hover:text-blue-500 transition",children:[(0,s.jsx)(eQ.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:a.commentCount})]}),(0,s.jsx)("button",{onClick:()=>D(a._id),className:"flex items-center gap-2 transition ".concat(a.isBookmarked?"text-yellow-500":"text-gray-600 hover:text-yellow-500"),children:(0,s.jsx)(eX.Z,{className:"w-5 h-5 ".concat(a.isBookmarked?"fill-current":"")})})]}),g===a._id&&(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.comments.length>0&&(0,s.jsx)("div",{className:"space-y-3 mb-4",children:a.comments.map((e,a)=>(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(eT.Z,{className:"w-4 h-4 text-gray-600"})}),(0,s.jsxs)("div",{className:"flex-1 bg-gray-50 rounded-lg p-3",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:e.userName}),(0,s.jsx)("p",{className:"text-sm text-gray-700",children:e.content})]})]},a))}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:h,onChange:e=>b(e.target.value),placeholder:e("post.commentPlaceholder"),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",onKeyPress:e=>{"Enter"===e.key&&A(a._id)}}),(0,s.jsx)("button",{onClick:()=>A(a._id),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:(0,s.jsx)(e0.Z,{className:"w-4 h-4"})})]})]})]},a._id)),u&&(0,s.jsx)("button",{onClick:P,className:"w-full py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition",children:e("post.loadMore")})]})]})}var e6=t(2829),e1=t(8248),e3=t(4452);function e5(){let{t:e}=(0,w.$G)("inventory"),[a,t]=(0,r.useState)([]),[i,l]=(0,r.useState)(null),[n,o]=(0,r.useState)(!0),[d,m]=(0,r.useState)("all"),[u,p]=(0,r.useState)(""),[g,x]=(0,r.useState)(!1),[h,b]=(0,r.useState)(!1),[y,f]=(0,r.useState)(null),j=c.currentUser;(0,r.useEffect)(()=>{N()},[d,u]);let N=async()=>{if(j){o(!0);try{let e={};"all"!==d&&(e.location=d),u&&(e.search=u);let a=await v.getAll(j.uid,e);t(a.items||[]),l(a.stats||null)}catch(e){console.error("Error loading inventory:",e)}finally{o(!1)}}},C=async a=>{if(j&&confirm(e("delete.confirm")))try{await v.delete(a,j.uid),N()}catch(a){console.error("Error deleting item:",a),alert(e("delete.error"))}},S=e=>{switch(e){case"expired":return"bg-red-100 text-red-800 border-red-300";case"today":case"tomorrow":case"soon":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"week":case"fresh":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},P=a=>a.expirationDate?a.isExpired?e("status.expired"):0===a.daysUntilExpiration?e("status.expiresToday"):1===a.daysUntilExpiration?e("status.expiresTomorrow"):a.daysUntilExpiration&&a.daysUntilExpiration<=3?e("status.daysLeft",{count:a.daysUntilExpiration}):a.daysUntilExpiration&&a.daysUntilExpiration<=7?e("status.daysRemaining",{count:a.daysUntilExpiration}):e("status.fresh"):e("status.noExpiration"),k=e=>{switch(e){case"fridge":return"\uD83E\uDDCA";case"freezer":return"❄️";case"pantry":return"\uD83C\uDFFA";default:return"\uD83D\uDCE6"}};return(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:e("title")}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition font-medium",children:[(0,s.jsx)(eo.Z,{className:"w-4 h-4"}),e("buttons.quickScan")]}),(0,s.jsxs)("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition font-medium",children:[(0,s.jsx)(eg.Z,{className:"w-4 h-4"}),e("buttons.addItem")]})]})]}),i&&(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(e6.Z,{className:"w-5 h-5 text-blue-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:e("stats.totalItems")})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:i.totalItems})]}),(0,s.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(eS.Z,{className:"w-5 h-5 text-yellow-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:e("stats.expiringSoon")})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:i.expiringCount})]}),(0,s.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(eM.Z,{className:"w-5 h-5 text-red-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:e("stats.expired")})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-red-600",children:i.expiredCount})]}),(0,s.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(e1.Z,{className:"w-5 h-5 text-orange-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:e("stats.lowStock")})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-orange-600",children:i.lowStockCount})]})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-md p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(ec.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:e("search.placeholder"),value:u,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:["all","pantry","fridge","freezer"].map(a=>(0,s.jsx)("button",{onClick:()=>m(a),className:"px-4 py-2 rounded-lg font-medium transition ".concat(d===a?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"all"===a?e("filters.all"):k(a)+" "+e("filters.locations.".concat(a))},a))})]})}),n?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-purple-600 border-t-transparent"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:e("loading")})]}):0===a.length?(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-12 text-center",children:[(0,s.jsx)(e6.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:e("empty.title")}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:e("empty.description")}),(0,s.jsx)("button",{onClick:()=>b(!0),className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition",children:e("empty.action")})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(a=>(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 ".concat(a.isExpired?"border-red-500":a.isExpiring?"border-yellow-500":"border-green-500"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-gray-800",children:a.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:a.category})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{onClick:()=>f(a),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",children:(0,s.jsx)(eI.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>C(a._id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:(0,s.jsx)(eb.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[a.quantity," ",(0,s.jsx)("span",{className:"text-sm text-gray-600",children:a.unit})]}),a.isLow&&(0,s.jsx)("span",{className:"inline-block mt-1 px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full font-medium",children:e("badges.lowStock")})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(e3.Z,{className:"w-4 h-4 text-gray-500"}),(0,s.jsxs)("span",{className:"text-sm text-gray-700",children:[k(a.location)," ",a.location.charAt(0).toUpperCase()+a.location.slice(1)]})]}),a.expirationDate&&(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(eY.Z,{className:"w-4 h-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:new Date(a.expirationDate).toLocaleDateString()})]}),(0,s.jsx)("div",{className:"px-3 py-1 rounded-lg border text-sm font-medium ".concat(S(a.expirationStatus)),children:P(a)}),a.allergens&&a.allergens.length>0&&(0,s.jsx)("div",{className:"mt-3 flex flex-wrap gap-1",children:a.allergens.map((e,a)=>(0,s.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:e},a))})]},a._id))}),h&&(0,s.jsx)(e4,{onClose:()=>b(!1),onComplete:()=>{b(!1),N()}}),g&&(0,s.jsx)(e7,{onClose:()=>x(!1),onComplete:()=>{x(!1),N()}}),y&&(0,s.jsx)(e8,{item:y,onClose:()=>f(null),onComplete:()=>{f(null),N()}})]})}function e4(e){let{onClose:a,onComplete:t}=e,{t:i}=(0,w.$G)("inventory"),[l,n]=(0,r.useState)(""),[o,d]=(0,r.useState)(1),[m,u]=(0,r.useState)("pantry"),[p,g]=(0,r.useState)(0),[x,h]=(0,r.useState)(!1),b=c.currentUser,y=async()=>{if(!b||!l.trim()){alert(i("scanning.errors.barcodeRequired"));return}h(!0);try{await v.scanBarcode(b.uid,l,o,m),g(p+1),n(""),d(1),alert(i("scanning.success"))}catch(e){console.error("Error scanning:",e),alert(i("scanning.errors.productNotFound"))}finally{h(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full p-6 shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:i("scanning.title")}),(0,s.jsx)("button",{onClick:a,className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)(eM.Z,{className:"w-6 h-6"})})]}),(0,s.jsxs)("div",{className:"mb-4 bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-purple-800",children:i("scanning.description")}),(0,s.jsx)("p",{className:"text-sm text-purple-600 mt-2 font-medium",children:i("scanning.itemsScanned",{count:p})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:i("scanning.barcode")}),(0,s.jsx)("input",{type:"text",value:l,onChange:e=>n(e.target.value),placeholder:i("scanning.barcodePlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",onKeyPress:e=>"Enter"===e.key&&y()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:i("scanning.quantity")}),(0,s.jsx)("input",{type:"number",value:o,onChange:e=>d(parseInt(e.target.value)||1),min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:i("scanning.location")}),(0,s.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[(0,s.jsxs)("option",{value:"pantry",children:["\uD83C\uDFFA ",i("filters.locations.pantry")]}),(0,s.jsxs)("option",{value:"fridge",children:["\uD83E\uDDCA ",i("filters.locations.fridge")]}),(0,s.jsxs)("option",{value:"freezer",children:["❄️ ",i("filters.locations.freezer")]}),(0,s.jsxs)("option",{value:"other",children:["\uD83D\uDCE6 ",i("filters.locations.other")]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:y,disabled:x,className:"flex-1 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition disabled:opacity-50",children:x?i("scanning.scanning"):i("scanning.scanAndAdd")}),(0,s.jsx)("button",{onClick:t,className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition",children:i("common:buttons.done")})]})]})]})})}function e7(e){let{onClose:a,onComplete:t}=e,{t:r}=(0,w.$G)("inventory");return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full p-6 shadow-2xl",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:r("modals.addItem.title")}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:r("modals.addItem.description")}),(0,s.jsx)("button",{onClick:a,className:"w-full py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition",children:r("common:buttons.close")})]})})}function e8(e){let{item:a,onClose:t,onComplete:r}=e,{t:i}=(0,w.$G)("inventory");return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full p-6 shadow-2xl",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:i("modals.editItem.title",{name:a.name})}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:i("modals.editItem.description")}),(0,s.jsx)("button",{onClick:t,className:"w-full py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition",children:i("common:buttons.close")})]})})}function e9(e){let{user:a}=e,{t}=(0,w.$G)("analytics"),[i,l]=(0,r.useState)(null),[n,o]=(0,r.useState)(!0),[d,c]=(0,r.useState)(7);(0,r.useEffect)(()=>{m()},[d,a]);let m=async()=>{let e=(null==a?void 0:a.firebaseId)||(null==a?void 0:a.uid);if(!e){console.log("[Analytics] No user ID found, user object:",a),o(!1);return}console.log("[Analytics] Loading analytics for user:",e),o(!0);try{let a="http://localhost:5002/api/analytics/dashboard/".concat(e,"?days=").concat(d);console.log("[Analytics] Fetching:",a);let t=await fetch(a);if(console.log("[Analytics] Response status:",t.status),t.ok){let e=await t.json();console.log("[Analytics] Data received:",e),l(e)}else{let e=await t.text();console.error("[Analytics] Failed to load:",t.status,e)}}catch(e){console.error("[Analytics] Error loading analytics:",e)}finally{o(!1)}};if(n)return(0,s.jsx)("div",{className:"flex items-center justify-center p-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});if(!i)return console.log("[Analytics] No analytics data, showing empty state"),(0,s.jsxs)("div",{className:"text-center p-12",children:[(0,s.jsx)(eJ.Z,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:t("emptyState.title")}),(0,s.jsx)("p",{className:"text-gray-600",children:t("emptyState.description")}),(0,s.jsx)("button",{onClick:()=>m(),className:"mt-4 bg-purple-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-purple-700",children:t("emptyState.retry")})]});console.log("[Analytics] Rendering dashboard with data:",i);let{summary:u,nutrition:p,insights:g}=i;return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto pb-24",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t("title")}),(0,s.jsx)("p",{className:"text-gray-600",children:t("subtitle")}),(0,s.jsx)("div",{className:"flex gap-2 mt-4",children:[7,14,30].map(e=>(0,s.jsx)("button",{onClick:()=>c(e),className:"px-4 py-2 rounded-lg font-semibold transition ".concat(d===e?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t("timeRange.days",{count:e})},e))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-2xl border-2 border-green-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)(eh.Z,{className:"w-5 h-5 text-green-600"}),(0,s.jsxs)("span",{className:"text-2xl font-bold text-green-700",children:[u.safetyScore,"%"]})]}),(0,s.jsx)("p",{className:"text-sm font-semibold text-green-800",children:t("metrics.safetyScore")}),(0,s.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:[u.safeItems," ",t("metrics.safeItems")," / ",u.totalItems," ",t("metrics.items")]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-2xl border-2 border-orange-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)(eH.Z,{className:"w-5 h-5 text-orange-600"}),(0,s.jsx)("span",{className:"text-2xl font-bold text-orange-700",children:u.currentStreak})]}),(0,s.jsx)("p",{className:"text-sm font-semibold text-orange-800",children:t("metrics.streak")}),(0,s.jsx)("p",{className:"text-xs text-orange-600 mt-1",children:t("metrics.streakSubtext")})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-2xl border-2 border-blue-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)(eV.Z,{className:"w-5 h-5 text-blue-600"}),(0,s.jsxs)("span",{className:"text-2xl font-bold text-blue-700",children:[p.avgDailyCarbs,"g"]})]}),(0,s.jsx)("p",{className:"text-sm font-semibold text-blue-800",children:t("metrics.avgCarbs")}),(0,s.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:[t("metrics.of")," ",p.dailyCarbLimit,"g ",t("metrics.limit")]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-2xl border-2 border-purple-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)(eJ.Z,{className:"w-5 h-5 text-purple-600"}),(0,s.jsx)("span",{className:"text-2xl font-bold text-purple-700",children:p.mealsTracked})]}),(0,s.jsx)("p",{className:"text-sm font-semibold text-purple-800",children:t("metrics.mealsLogged")}),(0,s.jsx)("p",{className:"text-xs text-purple-600 mt-1",children:t("timeRange.days",{count:d})})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg mb-6",children:[(0,s.jsxs)("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[(0,s.jsx)(eV.Z,{className:"w-5 h-5 text-purple-600"}),t("carbBudget.title")]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,s.jsxs)("span",{className:"text-gray-600",children:[p.avgDailyCarbs,"g / ",p.dailyCarbLimit,"g"]}),(0,s.jsxs)("span",{className:"font-semibold ".concat(p.avgDailyCarbs>p.dailyCarbLimit?"text-red-600":p.avgDailyCarbs>.8*p.dailyCarbLimit?"text-orange-600":"text-green-600"),children:[Math.round(p.avgDailyCarbs/p.dailyCarbLimit*100),"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:(0,s.jsx)("div",{className:"h-full transition-all duration-500 ".concat(p.avgDailyCarbs>p.dailyCarbLimit?"bg-red-500":p.avgDailyCarbs>.8*p.dailyCarbLimit?"bg-orange-500":"bg-green-500"),style:{width:"".concat(Math.min(100,p.avgDailyCarbs/p.dailyCarbLimit*100),"%")}})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded-xl",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[p.avgDailyCarbs,"g"]}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:t("carbBudget.dailyAvg")})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded-xl",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[Math.max(0,p.dailyCarbLimit-p.avgDailyCarbs),"g"]}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:t("carbBudget.remaining")})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded-xl",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[p.avgDailyProtein,"g"]}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:t("carbBudget.protein")})]})]})]}),g&&g.length>0&&(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg mb-6",children:[(0,s.jsxs)("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[(0,s.jsx)(eJ.Z,{className:"w-5 h-5 text-purple-600"}),t("insights.title")]}),(0,s.jsx)("div",{className:"space-y-3",children:g.map((e,a)=>{let r=e.message;return e.message.includes("Perfect safety score")?r=t("insights.perfectSafety",{count:u.totalItems}):e.message.includes("Great carb control")||e.message.includes("staying within your budget")?r=t("insights.greatCarbControl"):(e.message.includes("Meal Planner")||e.message.includes("diabetes-friendly"))&&(r=t("insights.tryMealPlanner")),(0,s.jsx)("div",{className:"p-4 rounded-xl border-2 ".concat("success"===e.type?"bg-green-50 border-green-200":"warning"===e.type?"bg-orange-50 border-orange-200":"achievement"===e.type?"bg-purple-50 border-purple-200":"bg-blue-50 border-blue-200"),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:e.icon}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("p",{className:"font-semibold ".concat("success"===e.type?"text-green-800":"warning"===e.type?"text-orange-800":"achievement"===e.type?"text-purple-800":"text-blue-800"),children:r})})]})},a)})})]}),u.dangerousItems>0&&(0,s.jsx)("div",{className:"bg-red-50 border-2 border-red-200 p-6 rounded-2xl mb-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)(en.Z,{className:"w-8 h-8 text-red-600 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-red-900 mb-2",children:t("dangerZone.title")}),(0,s.jsx)("p",{className:"text-red-800 mb-3",children:t("dangerZone.description",{count:u.dangerousItems}).split(/\{\{count\}\}/).map((e,a,t)=>a===t.length-1?e:(0,s.jsxs)("span",{children:[e,(0,s.jsx)("span",{className:"font-bold",children:u.dangerousItems})]},a))}),(0,s.jsx)("button",{className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition",children:t("dangerZone.button")})]})]})}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-600 to-purple-800 text-white p-6 rounded-2xl shadow-lg",children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-4",children:t("summary.title",{days:d})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-200 text-sm mb-1",children:t("summary.itemsScanned")}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:u.totalItems})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-200 text-sm mb-1",children:t("summary.safeItems")}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-300",children:u.safeItems})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-200 text-sm mb-1",children:t("summary.mealsTracked")}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:p.mealsTracked})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-200 text-sm mb-1",children:t("summary.safetyScore")}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-green-300",children:[u.safetyScore,"%"]})]})]})]})]})}var ae=t(4823),aa=t(8333),at=t(844),as=t(1026),ar=t(7686),ai=t(3502);let al={home:!0,scanner:!0,shopping:!0,meals:!0,inventory:!0,discover:!0,analytics:!0,community:!0,profile:!0},an=[{id:"home",label:"Home",emoji:"\uD83C\uDFE0",description:"Dashboard with quick stats"},{id:"scanner",label:"Scanner",emoji:"\uD83D\uDCF7",description:"Scan product barcodes"},{id:"shopping",label:"Shopping Lists",emoji:"\uD83D\uDCDD",description:"Manage your shopping lists"},{id:"meals",label:"Meal Planner",emoji:"\uD83D\uDCC5",description:"Plan diabetes-friendly meals"},{id:"inventory",label:"Inventory",emoji:"\uD83D\uDCE6",description:"Track pantry items"},{id:"discover",label:"Product Discovery",emoji:"\uD83D\uDD0D",description:"Browse safe products"},{id:"analytics",label:"Analytics",emoji:"\uD83D\uDCCA",description:"Detailed health insights & AI recommendations"},{id:"community",label:"Community",emoji:"\uD83D\uDC65",description:"Share tips and recipes"},{id:"profile",label:"Profile",emoji:"\uD83D\uDC64",description:"Your health profile & settings"}];function ao(e){let{user:a,onNavigateToProfile:t}=e,{t:i}=(0,w.$G)("settings"),[l,n]=(0,r.useState)(al),[o,d]=(0,r.useState)(!1),[c,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("tabVisibility");if(e)try{n(JSON.parse(e))}catch(e){console.error("Failed to load tab preferences:",e)}},[]);let u=e=>{if("home"===e||"profile"===e){let a="home"===e?i("navigation.tabNames.home"):i("navigation.tabNames.profile");alert(i("navigation.alerts.requiredTab",{tab:a}));return}n(a=>({...a,[e]:!a[e]}))},p=Object.values(l).filter(Boolean).length;return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto pb-24",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-2 flex items-center gap-2",children:[(0,s.jsx)(ae.Z,{className:"w-7 h-7"}),i("title")]}),(0,s.jsx)("p",{className:"text-gray-600",children:i("subtitle")})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:i("navigation.title")}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:i("navigation.description")})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[p,"/",an.length]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:i("navigation.visible")})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:an.map(e=>{let a=l[e.id],t="home"===e.id||"profile"===e.id;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-xl border-2 transition ".concat(a?"bg-purple-50 border-purple-200":"bg-gray-50 border-gray-200 opacity-60"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,s.jsx)("span",{className:"text-3xl",children:e.emoji}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"font-bold text-gray-900",children:i("navigation.tabNames.".concat(e.id))}),t&&(0,s.jsx)("span",{className:"text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded-full font-semibold",children:i("navigation.required")})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:i("navigation.tabDescriptions.".concat(e.id))})]})]}),(0,s.jsx)("button",{onClick:()=>u(e.id),disabled:t,className:"p-3 rounded-lg transition ".concat(a?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-600 hover:bg-gray-400"," ").concat(t?"cursor-not-allowed opacity-50":"cursor-pointer"),children:a?(0,s.jsx)(aa.Z,{className:"w-5 h-5"}):(0,s.jsx)(at.Z,{className:"w-5 h-5"})})]},e.id)})}),(0,s.jsx)("div",{className:"mt-6 bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,s.jsx)("strong",{children:i("navigation.tips.title")})," ",i("navigation.tips.text")]})}),(0,s.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,s.jsxs)("button",{onClick:()=>{d(!0),localStorage.setItem("tabVisibility",JSON.stringify(l)),window.dispatchEvent(new CustomEvent("tabVisibilityChanged")),setTimeout(()=>{d(!1),m(!0),setTimeout(()=>m(!1),3e3)},500)},disabled:o,className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-3 px-6 rounded-xl font-bold transition flex items-center justify-center gap-2 disabled:opacity-50",children:[(0,s.jsx)(eR.Z,{className:"w-5 h-5"}),o?i("buttons.saving"):c?i("buttons.saved"):i("buttons.save")]}),(0,s.jsx)("button",{onClick:()=>{confirm(i("navigation.confirmation.reset"))&&(n(al),localStorage.removeItem("tabVisibility"))},className:"px-6 bg-gray-200 hover:bg-gray-300 text-gray-900 py-3 rounded-xl font-semibold transition",children:i("buttons.reset")})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[t&&(0,s.jsxs)("button",{onClick:t,className:"w-full bg-white hover:bg-gray-50 p-6 rounded-2xl shadow-lg transition flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"bg-purple-100 p-3 rounded-xl",children:(0,s.jsx)(ae.Z,{className:"w-6 h-6 text-purple-600"})}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"font-bold text-gray-900",children:i("sections.profile.title")}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:i("sections.profile.description")})]})]}),(0,s.jsx)("span",{className:"text-gray-400",children:"›"})]}),(0,s.jsxs)("button",{className:"w-full bg-white hover:bg-gray-50 p-6 rounded-2xl shadow-lg transition flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"bg-green-100 p-3 rounded-xl",children:(0,s.jsx)(as.Z,{className:"w-6 h-6 text-green-600"})}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"font-bold text-gray-900",children:i("sections.notifications.title")}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:i("sections.notifications.description")})]})]}),(0,s.jsx)("span",{className:"text-gray-400",children:"›"})]}),(0,s.jsxs)("button",{className:"w-full bg-white hover:bg-gray-50 p-6 rounded-2xl shadow-lg transition flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"bg-blue-100 p-3 rounded-xl",children:(0,s.jsx)(ar.Z,{className:"w-6 h-6 text-blue-600"})}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"font-bold text-gray-900",children:i("sections.privacy.title")}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:i("sections.privacy.description")})]})]}),(0,s.jsx)("span",{className:"text-gray-400",children:"›"})]}),(0,s.jsxs)("button",{className:"w-full bg-white hover:bg-gray-50 p-6 rounded-2xl shadow-lg transition flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"bg-purple-100 p-3 rounded-xl",children:(0,s.jsx)(ai.Z,{className:"w-6 h-6 text-purple-600"})}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"font-bold text-gray-900",children:i("sections.appearance.title")}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:i("sections.appearance.description")})]})]}),(0,s.jsx)("span",{className:"text-gray-400",children:"›"})]})]})]})}function ad(e){let{size:a="medium",showText:t=!0,variant:r="default",className:i=""}=e,l={small:{shield:32,text:"text-xl",gap:"gap-2"},medium:{shield:48,text:"text-3xl",gap:"gap-3"},large:{shield:64,text:"text-4xl",gap:"gap-4"},xlarge:{shield:80,text:"text-5xl",gap:"gap-5"}}[a],n=l.shield,o={default:{shieldGradient:"url(#shield-gradient)",cart:"white",text:"#667eea"},white:{shieldGradient:"white",cart:"#667eea",text:"white"},colored:{shieldGradient:"url(#shield-gradient)",cart:"white",text:"#1a1a1a"}}[r];return(0,s.jsxs)("div",{className:"flex items-center ".concat(l.gap," ").concat(i),children:[(0,s.jsxs)("svg",{width:n,height:n,viewBox:"0 0 100 100",className:"flex-shrink-0",children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"shield-gradient-".concat(a),x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",style:{stopColor:"#667eea",stopOpacity:1}}),(0,s.jsx)("stop",{offset:"100%",style:{stopColor:"#764ba2",stopOpacity:1}})]})}),(0,s.jsx)("path",{d:"M 50 8 L 85 25 L 85 65 L 50 92 L 15 65 L 15 25 Z",fill:"white"===r?"white":"url(#shield-gradient-".concat(a,")")}),(0,s.jsxs)("g",{transform:"translate(50, 50)",children:[(0,s.jsx)("rect",{x:"-12",y:"-10",width:"18",height:"16",rx:"2",fill:o.cart,stroke:o.cart,strokeWidth:"2"}),(0,s.jsx)("path",{d:"M -12 -10 L -10 -15",stroke:o.cart,strokeWidth:"2.5",strokeLinecap:"round",fill:"none"}),(0,s.jsx)("circle",{cx:"-8",cy:"10",r:"2.5",fill:o.cart}),(0,s.jsx)("circle",{cx:"2",cy:"10",r:"2.5",fill:o.cart})]})]}),t&&(0,s.jsx)("div",{className:"font-bold ".concat(l.text),style:{color:o.text},children:"SafeCart"})]})}var ac=t(4078);function am(){let{t:e,i18n:a}=(0,w.$G)("common"),t=[{code:"en",name:"English",flag:"\uD83C\uDDEC\uD83C\uDDE7",dir:"ltr"},{code:"he",name:"עברית",flag:"\uD83C\uDDEE\uD83C\uDDF1",dir:"rtl"},{code:"es",name:"Espa\xf1ol",flag:"\uD83C\uDDEA\uD83C\uDDF8",dir:"ltr"}];(0,r.useEffect)(()=>{let e=localStorage.getItem("preferredLanguage")||"en";a.language!==e&&a.changeLanguage(e);let s=t.find(a=>a.code===e);s&&(document.documentElement.dir=s.dir,document.documentElement.lang=e)},[]);let i=e=>{let s=t.find(a=>a.code===e);s&&(document.documentElement.dir=s.dir,document.documentElement.lang=e),a.changeLanguage(e),localStorage.setItem("preferredLanguage",e),window.location.reload()};return(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-white bg-opacity-20 px-3 py-2 rounded-xl border border-white border-opacity-30 hover:bg-opacity-30 transition",children:[(0,s.jsx)(ac.Z,{className:"w-5 h-5 text-white"}),(0,s.jsx)("select",{value:a.language,onChange:e=>i(e.target.value),className:"bg-transparent border-none outline-none font-medium text-white cursor-pointer",style:{colorScheme:"dark"},children:t.map(e=>(0,s.jsxs)("option",{value:e.code,style:{color:"#000"},children:[e.flag," ",e.name]},e.code))})]})}function au(e){let{user:a}=e,{t}=(0,w.$G)("common"),[i,l]=(0,r.useState)("home"),[o,d]=(0,r.useState)({home:!0,scanner:!0,shopping:!0,meals:!0,inventory:!0,discover:!0,analytics:!0,community:!0,settings:!0}),[m,u]=(0,r.useState)([{id:1,name:"Almond Butter",barcode:"012345678901",allergens:["tree nuts"],sugar:2,carbs:6,gi:32,gl:2,safe:!0},{id:2,name:"Whole Wheat Bread",barcode:"012345678902",allergens:["gluten"],sugar:3,carbs:45,gi:71,gl:32,safe:!1}]),[p,g]=(0,r.useState)({totalItems:0,safeProducts:0,mealsPlanned:0,avgGI:0});(0,r.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("tabVisibility");if(e)try{d(JSON.parse(e))}catch(e){console.error("Failed to load tab preferences:",e)}};e();let a=()=>{e()};return window.addEventListener("tabVisibilityChanged",a),()=>{window.removeEventListener("tabVisibilityChanged",a)}},[]),(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{let t=c.currentUser;if(!t){console.log("No current user");return}let s=0,r=0,i=0,l=0;try{let i=await y.getUserLists(t.uid);for(let t of(console.log("Loaded shopping lists:",i.length),i)){var e,a;s+=(null===(e=t.items)||void 0===e?void 0:e.length)||0,r+=(null===(a=t.items)||void 0===a?void 0:a.filter(e=>!1===e.checked).length)||0}}catch(e){console.log("Could not load shopping lists:",e)}try{i=(await x.getUserMeals(t.uid)).length,0===i?(i=6,console.log("Using sample meals count (database empty)")):console.log("Loaded meals from database:",i)}catch(e){console.log("Could not load meals, using sample count:",e),i=6}l=i>0?45:0,console.log("Setting stats:",{totalItems:s,safeProducts:r,mealsPlanned:i,avgGI:l}),g({totalItems:s,safeProducts:r,mealsPlanned:i,avgGI:l})}catch(e){console.error("Error loading stats:",e),g({totalItems:0,safeProducts:0,mealsPlanned:0,avgGI:0})}};(0,r.useEffect)(()=>{"home"===i&&h()},[i]);let b=async()=>{await (0,n.w7)(c)};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-24",children:[(0,s.jsx)("header",{className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white shadow-lg",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6 flex justify-between items-center",children:[(0,s.jsx)(ad,{size:"medium",variant:"white"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(am,{}),(0,s.jsx)("span",{className:"text-sm opacity-90 hidden sm:inline",children:null==a?void 0:a.email}),(0,s.jsxs)("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 rounded-lg transition font-medium text-sm",children:[(0,s.jsx)(N.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:t("buttons.logout","Logout")}),(0,s.jsx)("span",{className:"sm:hidden",children:"Out"})]})]})]})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8",children:["home"===i&&(0,s.jsx)(e$,{onNavigateToAnalytics:()=>l("analytics")}),"scanner"===i&&(0,s.jsx)(eu,{products:m}),"shopping"===i&&(0,s.jsx)(ef,{}),"meals"===i&&(0,s.jsx)(eE,{}),"inventory"===i&&(0,s.jsx)(e5,{}),"discover"===i&&(0,s.jsx)(ez,{}),"analytics"===i&&(0,s.jsx)(e9,{user:a}),"community"===i&&(0,s.jsx)(e2,{}),"profile"===i&&(0,s.jsx)(eB,{user:a}),"settings"===i&&(0,s.jsx)(ao,{user:a,onNavigateToProfile:()=>l("profile")})]}),(0,s.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 shadow-2xl safe-area-bottom",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 flex justify-around overflow-x-auto scrollbar-hide",children:[{id:"home",labelKey:"navigation.home",emoji:"\uD83C\uDFE0"},{id:"scanner",labelKey:"navigation.scanner",emoji:"\uD83D\uDCF7"},{id:"shopping",labelKey:"navigation.shopping",emoji:"\uD83D\uDCDD"},{id:"meals",labelKey:"navigation.meals",emoji:"\uD83D\uDCC5"},{id:"inventory",labelKey:"navigation.inventory",emoji:"\uD83D\uDCE6"},{id:"discover",labelKey:"navigation.discover",emoji:"\uD83D\uDD0D"},{id:"analytics",labelKey:"navigation.analytics",emoji:"\uD83D\uDCCA"},{id:"community",labelKey:"navigation.community",emoji:"\uD83D\uDC65"},{id:"settings",labelKey:"navigation.settings",emoji:"⚙️"}].filter(e=>!1!==o[e.id]).map(e=>{let{id:a,labelKey:r,emoji:n}=e;return(0,s.jsxs)("button",{onClick:()=>l(a),className:"flex flex-col items-center justify-center gap-1 py-3 px-2 sm:px-4 min-w-[60px] sm:min-w-[80px] transition ".concat(i===a?"text-purple-600 border-t-4 border-purple-600":"text-gray-500 hover:text-gray-700 active:bg-gray-100"),children:[(0,s.jsx)("span",{className:"text-xl sm:text-2xl",children:n}),(0,s.jsx)("span",{className:"text-[10px] sm:text-xs font-medium truncate max-w-full",children:t(r)})]},a)})})})]})}function ap(){let{t:e}=(0,w.$G)("auth"),[a,t]=(0,r.useState)(""),[i,l]=(0,r.useState)(""),[o,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[x,h]=(0,r.useState)(""),[b,y]=(0,r.useState)(""),[f,j]=(0,r.useState)(""),[v,N]=(0,r.useState)(!1),C=async e=>{e.preventDefault(),y(""),j(""),N(!0);try{o?await (0,n.Xb)(c,a,i):await (0,n.e5)(c,a,i)}catch(e){y(e.message)}finally{N(!1)}},S=async a=>{a.preventDefault(),y(""),j(""),N(!0);try{if(!x){y(e("resetPassword.errorEmpty")),N(!1);return}await (0,n.LS)(c,x),j(e("resetPassword.successMessage")),h(""),setTimeout(()=>{g(!1),j("")},3e3)}catch(e){y(e.message)}finally{N(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 to-purple-900 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)(ad,{size:"large",variant:"colored"})}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:e("tagline")})]}),b&&(0,s.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[(0,s.jsx)(en.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-red-700 text-sm",children:b})]}),f&&(0,s.jsxs)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5",children:"✓"}),(0,s.jsx)("p",{className:"text-green-700 text-sm",children:f})]}),p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:e("resetPassword.description")}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:e("resetPassword.emailLabel")}),(0,s.jsx)("input",{type:"email",value:x,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none transition",placeholder:e("emailPlaceholder"),required:!0})]}),(0,s.jsx)("button",{type:"submit",disabled:v,className:"w-full bg-gradient-to-r from-purple-600 to-purple-800 hover:from-purple-700 hover:to-purple-900 text-white font-semibold py-3 rounded-xl transition transform hover:scale-105 disabled:opacity-50",children:v?e("resetPassword.sending"):e("resetPassword.sendButton")})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)("button",{onClick:()=>{g(!1),h(""),y("")},className:"text-purple-600 hover:text-purple-700 font-semibold text-sm",children:e("resetPassword.backToSignIn")})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:e("email")}),(0,s.jsx)("input",{type:"email",value:a,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none transition",placeholder:e("emailPlaceholder"),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:e("password")}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:m?"text":"password",value:i,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-600 focus:border-transparent outline-none transition pr-12",placeholder:e("passwordPlaceholder"),required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>u(!m),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-purple-600 transition",children:m?(0,s.jsx)(at.Z,{className:"w-5 h-5"}):(0,s.jsx)(aa.Z,{className:"w-5 h-5"})})]})]}),(0,s.jsx)("button",{type:"submit",disabled:v,className:"w-full bg-gradient-to-r from-purple-600 to-purple-800 hover:from-purple-700 hover:to-purple-900 text-white font-semibold py-3 rounded-xl transition transform hover:scale-105 disabled:opacity-50",children:v?e("loading"):o?e("signUp"):e("signIn")})]}),(0,s.jsxs)("div",{className:"mt-6 space-y-3",children:[!o&&(0,s.jsx)("button",{onClick:()=>g(!0),className:"w-full text-purple-600 hover:text-purple-700 font-semibold text-sm py-2 transition",children:e("forgotPassword")}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-gray-600 text-sm",children:[o?e("alreadyHaveAccount"):e("dontHaveAccount"),(0,s.jsx)("button",{onClick:()=>d(!o),className:"ml-1 text-purple-600 hover:text-purple-700 font-semibold",children:o?e("signIn"):e("signUp")})]})})]})]})]})})}function ag(){let[e,a]=(0,r.useState)(null),[t,l]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0),[m,u]=(0,r.useState)(""),[p,g]=(0,r.useState)(!1);return((0,i.useRouter)(),(0,r.useEffect)(()=>{let e=(0,n.Aj)(c,async e=>{try{e?(a(e),u("")):(a(null),l(null),g(!1))}catch(e){console.error("Auth error:",e),u(e.message),a(null),l(null),g(!1)}finally{d(!1)}});return()=>e()},[]),o)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-purple-600 to-purple-900",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mb-8 flex justify-center",children:(0,s.jsx)(ad,{size:"xlarge",variant:"white"})}),(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-white",children:"Loading..."})]})}):m?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-purple-600 to-purple-900",children:(0,s.jsxs)("div",{className:"text-center text-white",children:[(0,s.jsxs)("p",{className:"text-lg mb-4",children:["Error: ",m]}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-white text-purple-600 px-6 py-2 rounded-lg font-semibold",children:"Retry"})]})}):e?(0,s.jsx)(au,{user:e}):(0,s.jsx)(ap,{})}}},function(e){e.O(0,[832,301,599,293,528,744],function(){return e(e.s=5135)}),_N_E=e.O()}]);